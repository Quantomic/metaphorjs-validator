'use strict';(function(){function t(a){return"function"==typeof a}function w(a){return"string"==typeof a||a===""+a}function Y(a){return"object"==typeof a&&5===Z(a)}function aa(a){if(null===a||"object"!=typeof a)return!1;a=Z(a);return 2<a||-1==a}function ia(a){return"object"==typeof a&&3===Z(a)&&!a.nodeType&&a.constructor===Object}function ja(a){return!0===a||!1===a}function D(){}function Ba(a,c,b,e,g,f){g=g||"before";return function(){var h,d;if("instead"==g)return c.apply(b||e,arguments);"before"==
g?(h=c.apply(b||e,arguments),d=!1!==h?a.apply(e||b,arguments):null):(d=a.apply(e||b,arguments),h=c.apply(b||e,arguments));return f?h:d}}function da(){return!1}function ea(){return!0}function ka(a){return null===a}function P(a,c){var b;if(b=c)b=!(c&&ra("(?:^|\\s)"+c+"(?!\\S)").test(a.className));b&&(a.className+=" "+c)}function H(a,c){c&&(a.className=a.className.replace(ra("(?:^|\\s)"+c+"(?!\\S)"),""))}function fa(a){if(a&&void 0!=!a.length&&a!==""+a){for(var c=[],b=-1,e=a.length>>>0;++b!==e;c[b]=
a[b]);return c}return a?[a]:[]}function k(a,c){return a.getAttribute?a.getAttribute(c):null}function sa(a,c,b,e){return setTimeout(function(){a.apply(c,b||[])},e||0)}function ta(a,c){var b,e;if(!a||!w(a))return null;try{e=new DOMParser,b=e.parseFromString(a,c||"text/xml")}catch(g){b=void 0}if(!b||b.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return b}function Q(a){if(!a)return!1;var c,b;return"object"!=(b=typeof a)&&"function"!=b?!1:t(c=a.then)?c:!1}function N(a){var c=a.stack||
Error().stack;if("undefined"!=typeof console&&console.log)sa(function(){console.log(a);c&&console.log(c)});else throw a;}function Ca(a){return a.replace(Da,function(a){return a.charAt(1).toUpperCase()})}function la(a,c,b){var e,g=a.childNodes;if(!1!==c.call(b,a))for(a=-1,e=g.length>>>0;++a!==e;la(g[a],c,b));}var ma={},Ea=Object.prototype.toString,Z=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,
"[object Date]":10};return function(c){if(!c){if(null===c)return 6;if(void 0===c)return 7}var b=a[Ea.call(c)];return void 0===b?-1:1==b&&isNaN(c)?8:b}}(),Fa=function(){var a,c=function(b){var c={},g=[];0==arguments.length&&(b=!0);return{addFinder:function(a,b,d){g[d?"unshift":"push"]({fn:a,context:b})},add:function(a,h,d){if(c[a]&&!1===c[a].rewritable)return c[a];c[a]={rewritable:"undefined"!=typeof d?d:b,value:h};return h},get:function(a){if(c[a])return c[a].value;if(g.length){var b,d,l;b=0;for(d=
g.length;b<d;b++)if(l=g[b].fn.call(g[b].context,a,this),void 0!==l)return this.add(a,l,!0)}},remove:function(a){var b=c[a];b&&!0===b.rewritable&&delete c[a];return b?b.value:void 0},exists:function(a){return!!c[a]},eachEntry:function(a,b){for(var d in c)a.call(b,c[d].value,d)},destroy:function(){this===a&&(a=null);this.remove=this.exists=this.destroy=this.get=this.add=b=c=null}}};c.global=function(){a||(a=new c(!0));return a};return c}(),na=function(){var a=function(a,e,g){g=g||new Fa(!1);var f=e?
e.length:null;a||(a="undefined"!=typeof global?global:window);var h=function(d){return d&&e&&d.substr(0,f)!=e?e+"."+d:d},d=function(d,c){d=h(d);if(g.exists(d))return g.get(d);if(!c){var f=d.split("."),B,C=f.length,z,R=a;for(B=0;B<C;B++)if(z=f[B],e&&0==B&&z==e)R=a;else{if(void 0===R[z])return;R=R[z]}R&&g.add(d,R);return R}};this.register=function(d,c){var f;f=h(d);var B=f.split("."),C,z=B.pop();C=B.join(".");var R=B.length,v,r=a;if(g[C])f=[g[C],z,f];else{if(0<R)for(C=0;C<R;C++)v=B[C],e&&0==C&&v==e?
r=a:(void 0===r[v]&&(r[v]={}),r=r[v]);f=[r,z,f]}B=f[0];z=f[1];aa(B)&&void 0===B[z]&&(B[z]=c,g.add(f[2],c));return c};this.exists=function(a){return void 0!==d(a,!0)};this.get=d;this.add=function(d,a){d=h(d);g.add(d,a);return a};this.remove=function(d){d=h(d);g.remove(d)};this.normalize=h;this.makeAlias=function(d,a){d=h(d);a=h(a);var b=g.get(d);void 0!==b&&g.add(a,b)};this.destroy=function(){var d;this===c&&(c=null);g.eachEntry(function(d){d&&d.$destroy&&d.$destroy()});g.destroy();g=null;for(d in this)this[d]=
null}};a.prototype.register=null;a.prototype.exists=null;a.prototype.get=null;a.prototype.add=null;a.prototype.remove=null;a.prototype.normalize=null;a.prototype.makeAlias=null;a.prototype.destroy=null;var c;a.global=function(){c||(c=new a);return c};return a}(),J=Array.prototype.slice,m=function(){return function c(){var b=!1,e=!1,g=J.call(arguments),f=g.shift(),h,d,l;ja(g[g.length-1])&&(b=g.pop());ja(g[g.length-1])&&(e=b,b=g.pop());for(;g.length;)if(h=g.shift())for(d in h)if(h.hasOwnProperty(d)&&
void 0!==(l=h[d]))if(e)if(f[d]&&ia(f[d])&&ia(l))c(f[d],l,b,e);else{if(!0===b||void 0==f[d])ia(l)?(f[d]={},c(f[d],l,b,!0)):f[d]=l}else if(!0===b||void 0==f[d])f[d]=l;return f}}(),Ga=function(a,c){var b=function(){},e;b.prototype=a.prototype;b=new b;e=a.apply(b,c);return aa(e)||!1===e?e:b},ba=function(){var a=function(){this.$super&&this.$super!==D&&this.$super.apply(this,arguments)},c=function(a,d,b){var $super=a.prototype[d]||("$constructor"==d?a:D)||D;return function(){var d,a=this.$super;this.$super=
$super;d=b.apply(this,arguments);this.$super=a;return d}},b=function(a,d,b,f){var e,g,C,z=b.prototype;for(e in d)d.hasOwnProperty(e)&&(C=z[e],g=d[e],a[e]=!t(g)||C&&!t(C)?g:c(b,e,g));f||(a.$plugins=null,a.$pluginMap=null,z.$beforeInit?(a.$beforeInit=z.$beforeInit.slice(),a.$afterInit=z.$afterInit.slice(),a.$beforeDestroy=z.$beforeDestroy.slice(),a.$afterDestroy=z.$afterDestroy.slice()):(a.$beforeInit=[],a.$afterInit=[],a.$beforeDestroy=[],a.$afterDestroy=[]))},e=function(a,d){for(var b in d)d.hasOwnProperty(b)&&
("$beforeInit"==b?a.$beforeInit.push(d[b]):"$afterInit"==b?a.$afterInit.push(d[b]):"$beforeDestroy"==b?a.$beforeDestroy.push(d[b]):"$afterDestroy"==b?a.$afterDestroy.push(d[b]):a[b]||(a[b]=d[b]))},g=function(c){c||(c=new na);var d=function(d){return function(){var a=[],b=[],f=arguments,l,e,g,n,q,F;if(!this)throw"Must instantiate via new: "+d;this.$plugins=[];(l=this.$constructor.apply(this,arguments))&&Y(l)&&(f=l);g=this.$plugins;q=this.$pluginMap={};l=-1;for(e=this.$beforeInit.length;++l<e;a.push([this.$beforeInit[l],
this]));l=-1;for(e=this.$afterInit.length;++l<e;b.push([this.$afterInit[l],this]));if(g&&g.length)for(l=0,e=g.length;l<e;l++){n=g[l];if(w(n)&&(F=n,n=c.get(n,!0),!n))throw F+" not found";n=new n(this,f);q[n.$class]=n;n.$beforeHostInit&&a.push([n.$beforeHostInit,n]);n.$afterHostInit&&b.push([n.$afterHostInit,n]);g[l]=n}l=-1;for(e=a.length;++l<e;a[l][0].apply(a[l][1],f));this.$init&&this.$init.apply(this,f);l=-1;for(e=b.length;++l<e;b[l][0].apply(b[l][1],f));}},l=function(){};m(l.prototype,{$class:null,
$extends:null,$plugins:null,$pluginMap:null,$mixins:null,$destroyed:!1,$constructor:D,$init:D,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$intercept:function(d,a,b,c,f){var l=this[d];this[d]=Ba(l,a,b||this,this,c,f);return l},$implement:function(d){var a=this.constructor;a&&a.$parent&&b(this,d,a.$parent)},$hasPlugin:function(d){return!!this.$pluginMap[c.normalize(d)]},$getPlugin:function(d){return this.$pluginMap[c.normalize(d)]||
null},$destroy:function(){var d=this.$beforeDestroy,a=this.$afterDestroy,b=this.$plugins,c,f,l;if(!this.$destroyed){this.$destroyed=!0;c=-1;for(f=d.length;++c<f;d[c].apply(this,arguments));c=0;for(f=b.length;c<f;c++)b[c].$beforeHostDestroy&&b[c].$beforeHostDestroy.call(b[c],arguments);l=this.destroy.apply(this,arguments);c=-1;for(f=d.length;++c<f;a[c].apply(this,arguments));c=0;for(f=b.length;c<f;c++)b[c].$destroy.apply(b[c],arguments);if(!1!==l)for(c in this)this.hasOwnProperty(c)&&(this[c]=null);
this.$destroyed=!0}},destroy:function(){}});l.$self=l;l.$instantiate=function(){var d=arguments;switch(d.length){case 0:return new this;case 1:return new this(d[0]);case 2:return new this(d[0],d[1]);case 3:return new this(d[0],d[1],d[2]);case 4:return new this(d[0],d[1],d[2],d[3]);default:return Ga(this,d)}};l.$override=function(d){var a=this.$self,c=this.$parent;a&&c&&b(a.prototype,d,c)};l.$extend=function(d,a){return n(d,a,this)};l.$destroy=function(){for(var d in this)this[d]=null};var n=function(f,
g,n){f=f||{};var q=f.$class,v=n||f.$extends,r=f.$mixins,p,k,m;v?w(v)?n=c.get(v):(n=v,v=n.$class||""):(n=l,v="");if(v&&!n)throw v+" not found";q&&(q=c.normalize(q));f.$class=q;f.$extends=v;f.$mixins=null;p=function(){};p.prototype=n.prototype;v=new p;p=null;f.$constructor=f.$constructor||a;b(v,f,n);if(r)for(f=0,p=r.length;f<p;f++)m=r[f],w(m)&&(m=c.get(m,!0)),e(v,m);r=d(q);v.constructor=r;r.prototype=v;for(k in l)"prototype"!=k&&l.hasOwnProperty(k)&&(r[k]=l[k]);for(k in n)"prototype"!=k&&n.hasOwnProperty(k)&&
(r[k]=n[k]);if(g)for(k in g)"prototype"!=k&&g.hasOwnProperty(k)&&(r[k]=g[k]);r.$parent=n;r.$self=r;q&&c.register(q,r);return r},q=this;q.factory=function(d){var a=c.get(d),b=J.call(arguments,1);if(!a)throw d+" not found";return a.$instantiate.apply(a,b)};q.isSubclassOf=function(d,a){var b=d,f=c.get;a=w(a)?c.normalize(a):a.prototype.$class;for(w(d)&&(b=f(c.normalize(d)));b&&b.prototype;){if(b.prototype.$class==a)return!0;b=b.$parent}return!1};q.isInstanceOf=function(d,a){var b=w(a)?c.get(a):a;return b?
d instanceof b:!1};q.define=n;q.destroy=function(){q===f&&(f=null);l.$destroy();l=null;c.destroy();g=c=null};q.BaseClass=l};g.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,destroy:null};var f;g.global=function(){f||(f=new g(na.global()));return f};return g}(),s=new na(ma,"MetaphorJs"),oa=(new ba(s)).define,p=Function.prototype.bind?function(a,c){return a.bind(c)}:function(a,c){return function(){return a.apply(c,arguments)}},O=function(a){if(a instanceof O)return a;if(!(this instanceof
O))return new O(a);for(var c in a)if(!this[c])try{this[c]=a[c]}catch(b){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var e,g=a.button;void 0===this.pageX&&null!==a.clientX&&(e=this.target?this.target.ownerDocument||window.document:window.document,c=e.documentElement,e=e.body,this.pageX=a.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||0)-(c&&c.clientLeft||e&&e.clientLeft||0),this.pageY=a.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||
0));this.which||void 0===g||(this.which=g&1?1:g&2?3:g&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ea:da;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};m(O.prototype,{isDefaultPrevented:da,isPropagationStopped:da,isImmediatePropagationStopped:da,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ea;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=
ea;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ea;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var ua=function(a){function c(){e=null}var b,e;a=function(a){return function(f){var h=new O(f||window.event),d=J.call(arguments,1),l=0,n=0,q=0,B=0,C=0,z=0;h.type="mousewheel";"detail"in h&&(q=-1*h.detail);"wheelDelta"in h&&(q=h.wheelDelta);"wheelDeltaY"in h&&(q=h.wheelDeltaY);
"wheelDeltaX"in h&&(n=-1*h.wheelDeltaX);"axis"in h&&h.axis===h.HORIZONTAL_AXIS&&(n=-1*q,q=0);l=0===q?n:q;"deltaY"in h&&(l=q=-1*h.deltaY);"deltaX"in h&&(n=h.deltaX,0===q&&(l=-1*n));if(0!==q||0!==n){B=Math.max(Math.abs(q),Math.abs(n));if(!e||B<e)e=B,"mousewheel"===h.type&&0===B%120&&(e/=40);"mousewheel"===h.type&&0===B%120&&(l/=40,n/=40,q/=40);l=Math[1<=l?"floor":"ceil"](l/e);n=Math[1<=n?"floor":"ceil"](n/e);q=Math[1<=q?"floor":"ceil"](q/e);this.getBoundingClientRect&&(B=this.getBoundingClientRect(),
C=h.clientX-B.left,z=h.clientY-B.top);h.deltaX=n;h.deltaY=q;h.deltaFactor=e;h.offsetX=C;h.offsetY=z;h.deltaMode=0;d.unshift(h,l,n,q);b&&clearTimeout(b);b=setTimeout(c,200);return a.apply(this,d)}}};a.events=function(){var a=window.document;return"onwheel"in a||9<=a.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]};return a}(),L=function(){var a=null,c=null;return function(b,e,g){null===a&&(a=b.attachEvent?"attachEvent":"addEventListener",c=b.attachEvent?"on":"");if("mousewheel"==
e){g=ua(g);e=ua.events();var f,h;f=0;for(h=e.length;f<h;f++)b[a](c+e[f],g,!1)}else b[a](c+e,g,!1);return g}}(),va=function(){var a=null,c=null;return function(b,e,g){null===a&&(a=b.detachEvent?"detachEvent":"removeEventListener",c=b.detachEvent?"on":"");b[a](c+e,g)}}(),ra=function(){var a={};return function(c){return a[c]||(a[c]=new RegExp(c))}}(),K=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,c=/=([^\]]+)/,b=/ *, */,e=/(\([^)]*)\+/,g=/(\[[^\]]+)~/,f=/(~|>|\+)/,h=/ +/,d=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
l=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,n=/\D/,q=/[^(]*\(([^)]*)\)/,B=/\(.*/,C=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,z=window.document,p=!!z.getElementsByClassName,v=!!z.querySelectorAll,r={"first-child":function(d){return d.parentNode.getElementsByTagName("*")[0]!==d},"last-child":function(d){for(;(d=d.nextSibling)&&1!=d.nodeType;);return!!d},root:function(d){return"html"!==d.nodeName.toLowerCase()},"nth-child":function(d,a){var b=d.nodeIndex||0,c=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,f=a[1];if(b)return!((b+
c)%f);var l=d.parentNode.firstChild;b++;do if(1==l.nodeType&&(l.nodeIndex=++b)&&d===l&&(b+c)%f)return 0;while(l=l.nextSibling);return 1},"nth-last-child":function(d,a){var b=d.nodeIndexLast||0,c=a[3]?("%"===a[2]?-1:1)*a[3]:0,f=a[1];if(b)return!((b+c)%f);var l=d.parentNode.lastChild;b++;do if(1==l.nodeType&&(l.nodeLastIndex=b++)&&d===l&&(b+c)%f)return 0;while(l=l.previousSibling);return 1},empty:function(d){return!!d.firstChild},parent:function(d){return!d.firstChild},"only-child":function(d){return 1!=
d.parentNode.getElementsByTagName("*").length},checked:function(d){return!d.checked},lang:function(d,a){return d.lang!==a&&z.documentElement.lang!==a},enabled:function(d){return d.disabled||"hidden"===d.type},disabled:function(d){return!d.disabled},selected:function(d){return!d.selected}},m={},t=function(d){return m[d]||(m[d]=new RegExp("(^| +)"+d+"($| +)"))},s={"":function(d,a){return null!==k(d,a)},"=":function(d,a,b){var c;return(c=k(d,a))&&c===b},"&=":function(d,a,b){var c;return(c=k(d,a))&&t(b).test(c)},
"^=":function(d,a,b){var c;return(c=k(d,a)+"")&&!c.indexOf(b)},"$=":function(d,a,b){var c;return(c=k(d,a)+"")&&c.indexOf(b)==c.length-b.length},"*=":function(d,a,b){var c;return(c=k(d,a)+"")&&-1!=c.indexOf(b)},"|=":function(d,a,b){var c;return(c=k(d,a)+"")&&(c===b||!!c.indexOf(b+"-"))},"!=":function(d,a,b){var c;return!(c=k(d,a))||!t(b).test(c)}},F=function(F,S){S=S||z;var x=[],k=null,m,t,w,u,D,E,G;if(v)try{x=fa(S.querySelectorAll(F.replace(c,'="$1"')))}catch(O){k=!0}if(!v||k)if(a.test(F))switch(k=
0,F.charAt(0)){case "#":k=F.slice(1);x=z.getElementById(k);x.id!==k&&(x=z.all[k]);x=x?[x]:[];break;case ".":m=F.slice(1);if(p)x=fa((x=S.getElementsByClassName(m)).length?x:[]);else{m=" "+m+" ";t=S.getElementsByTagName("*");for(w=0;u=t[w++];)-1!=(" "+u.className+" ").indexOf(m)&&(x[k++]=u);x=k?x:[]}break;case ":":t=S.getElementsByTagName("*");w=0;D=F.replace(q,"$1");for(E=F.replace(B,"");u=t[w++];)r[E]&&!r[E](u,D)&&(x[k++]=u);x=k?x:[];break;case "[":t=S.getElementsByTagName("*");w=0;u=C.exec(F);m=
u[1];G=u[2]||"";for(D=u[3];u=t[w++];)s[G]&&(s[G](u,m,D)||"class"===m&&s[G](u,"className",D))&&(x[k++]=u);x=k?x:[];break;default:x=fa((x=S.getElementsByTagName(F)).length?x:[])}else{for(var H=F.split(b),L=H.length-1,P=!!L,N,J,A,M,T,U,V,W,Q,y,K,I;k=H[L--];){J=(N=k.replace(e,"$1%").replace(g,"$1&").replace(f," $1 ").split(h)).length;w=0;M=" ";for(t=[S];A=N[w++];)if(" "!==A&&">"!==A&&"~"!==A&&"+"!==A&&t){A=A.match(d);T=A[1]||"*";U=A[2];V=A[3]?" "+A[3]+" ":"";m=A[4];G=A[5]||"";E=A[7];D="nth-child"===E||
"nth-last-child"===E?l.exec("even"===A[8]&&"2n"||"odd"===A[8]&&"2n%1"||!n.test(A[8])&&"0n%"+A[8]||A[8]):A[8];W=[];k=Q=0;for(K=w==J;y=t[Q++];)switch(M){case " ":I=y.getElementsByTagName(T);for(y=0;u=I[y++];)U&&u.id!==U||V&&-1==(" "+u.className+" ").indexOf(V)||!(!m||s[G]&&(s[G](u,m,A[6])||"class"===m&&s[G](u,"className",A[6])))||u.yeasss||(r[E]?r[E](u,D):E)||(K&&(u.yeasss=1),W[k++]=u);break;case "~":for(T=T.toLowerCase();(y=y.nextSibling)&&!y.yeasss;)1!=y.nodeType||"*"!==T&&y.nodeName.toLowerCase()!==
T||U&&y.id!==U||V&&-1==(" "+y.className+" ").indexOf(V)||!(!m||s[G]&&(s[G](u,m,A[6])||"class"===m&&s[G](u,"className",A[6])))||y.yeasss||(r[E]?r[E](y,D):E)||(K&&(y.yeasss=1),W[k++]=y);break;case "+":for(;(y=y.nextSibling)&&1!=y.nodeType;);!y||y.nodeName.toLowerCase()!==T.toLowerCase()&&"*"!==T||U&&y.id!==U||V&&-1==(" "+u.className+" ").indexOf(V)||!(!m||s[G]&&(s[G](u,m,A[6])||"class"===m&&s[G](u,"className",A[6])))||y.yeasss||(r[E]?r[E](y,D):E)||(K&&(y.yeasss=1),W[k++]=y);break;case ">":for(I=y.getElementsByTagName(T),
w=0;u=I[w++];)u.parentNode!==y||U&&u.id!==U||V&&-1==(" "+u.className+" ").indexOf(V)||!(!m||s[G]&&(s[G](u,m,A[6])||"class"===m&&s[G](u,"className",A[6])))||u.yeasss||(r[E]?r[E](u,D):E)||(K&&(u.yeasss=1),W[k++]=u)}t=W}else M=A;if(P){if(!t.concat){W=[];for(y=0;u=t[y];)W[y++]=u;t=W}x=t.concat(1==x.length?x[0]:x)}else x=t}for(k=x.length;k--;)x[k].yeasss=x[k].nodeIndex=x[k].nodeIndexLast=null}return x};F.is=function(d,a){var b=F(a,d.parentNode),c,f;c=-1;for(f=b.length;++c<f;)if(b[c]===d)return!0;return!1};
return F}(),M=function(){return String.prototype.trim?function(a){return w(a)?a.trim():a}:function(a){return w(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Ha=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),ca=function(){var a=["0","0","0"];return function(){for(var c=a.length,b;c;){c--;b=a[c].charCodeAt(0);if(57==b)return a[c]="A",a.join("");if(90==b)a[c]="0";else return a[c]=String.fromCharCode(b+1),a.join("")}a.unshift("0");
return a.join("")}}(),wa=function(){var a=function(a,b,e,g,f){this.name=a;this.listeners=[];this.map={};this.hash=ca();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;"object"==typeof b&&null!==b?m(this,b,!0,!1):(this.returnResult=void 0===b?null:b,this.autoTrigger=e,this.triggerFilter=g,this.filterContext=f)};m(a.prototype,{name:null,listeners:null,map:null,hash:null,uni:null,suspended:!1,lid:null,returnResult:null,autoTrigger:null,lastTrigger:null,triggerFilter:null,filterContext:null,
getName:function(){return this.name},destroy:function(){for(var a in this)this[a]=null},on:function(a,b,e){if(!a)return null;b=b||null;e=e||{};var g=this.uni,f=b||a;if(f[g]&&!e.allowDupes)return null;var h=++this.lid,d=e.first||!1;f[g]=h;a={fn:a,context:b,uniContext:f,id:h,called:0,limit:0,start:1,count:0,append:null,prepend:null};m(a,e,!0,!1);d?this.listeners.unshift(a):this.listeners.push(a);this.map[h]=a;if(this.autoTrigger&&this.lastTrigger&&!this.suspended){var l=this.triggerFilter;this.triggerFilter=
function(d){return d.id==h?l?!1!==l(d):!0:!1};this.trigger.apply(this,this.lastTrigger);this.triggerFilter=l}return h},once:function(a,b,e){e=e||{};e.limit=1;return this.on(a,b,e)},un:function(a,b){var e=-1,g=this.uni,f=this.listeners,h;h=a==parseInt(a)?a:(b||a)[g];if(!h)return!1;for(var d=0,l=f.length;d<l;d++)if(f[d].id==h){e=d;delete f[d].uniContext[g];break}if(-1==e)return!1;f.splice(e,1);delete this.map[h];return!0},hasListener:function(a,b){var e=this.listeners,g;if(a){b=b||a;g=t(a)?b[this.uni]:
a;if(!g)return!1;for(var f=0,h=e.length;f<h;f++)if(e[f].id==g)return!0;return!1}return 0<e.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,e,g;e=0;for(g=a.length;e<g;e++)delete a[e].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var e;a.append||a.prepend?(e=J.call(b),a.prepend&&(e=a.prepend.concat(e)),a.append&&(e=e.concat(a.append))):e=b;return e},trigger:function(){var a=this.listeners,
b=this.returnResult,e=this.triggerFilter,g=this.filterContext,f;if(this.suspended)return null;this.autoTrigger&&(this.lastTrigger=J.call(arguments));if(0==a.length)return null;for(var h="all"==b||"merge"==b?[]:null,d,a="first"==b?[a[0]]:J.call(a);d=a.shift();)if(d&&this.map[d.id]&&(f=this._prepareArgs(d,arguments),!e||!1!==e.call(g,d,f,this))&&(d.count++,!(d.count<d.start)))if(f=d.fn.apply(d.context,f),d.called++,d.called==d.limit&&this.un(d.id),"all"==b)h.push(f);else if("merge"==b&&f)h=h.concat(f);
else{if("first"==b||"nonempty"==b&&f)return f;if("last"==b)h=f;else if(!1==b&&!1===f)return!1}if(b)return h}},!0,!1);return a}(),pa=function(){var a=function(){this.events={}};m(a.prototype,{createEvent:function(a,b,e,g,f){a=a.toLowerCase();var h=this.events;h[a]||(h[a]=new wa(a,b,e,g,f));return h[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,e,g){a=a.toLowerCase();var f=this.events;f[a]||(f[a]=new wa(a));return f[a].on(b,e,g)},once:function(a,b,e,g){g=g||{};g.limit=
1;return this.on(a,b,e,g)},un:function(a,b,e){a=a.toLowerCase();var g=this.events;g[a]&&g[a].un(b,e)},hasListener:function(a,b,e){var g=this.events;if(a)return a=a.toLowerCase(),g[a]?g[a].hasListener(b,e):!1;for(a in g)if(g[a].hasListener())return!0;return!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,J.call(arguments,1))},suspendEvent:function(a){a=
a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(){var a=this.events,b;for(b in a)this.destroyEvent(b);for(b in this)this[b]=null},getApi:function(){if(!this.api){for(var a=
"createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},e,g=-1,f=a.length;++g<f;e=a[g],b[e]=p(this[e],this));this.api=b}return this.api}},!0,!1);return a}(),qa=function(){var a=[],c=!1,b="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},e=function(){c=!0;var d=a.shift();b(function(){d[0].apply(d[1],d[2]);a.length?e():c=!1},0)},g=function(d,b,f){f=f||[];a.push([d,b,f]);c||
e()},f=function(a,b){return function(f){try{b.resolve(a(f))}catch(c){b.reject(c)}}},h=function(a,b){if(a instanceof h)return a;if(!(this instanceof h))return new h(a,b);var f;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(f=Q(a))a instanceof h?a.then(p(this.resolve,this),p(this.reject,this)):(new h(f,a)).then(p(this.resolve,this),p(this.reject,this));else if(t(a))try{a.call(b,p(this.resolve,this),p(this.reject,this))}catch(c){this.reject(c)}else this.resolve(a)};
m(h.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=this._rejects=this._fulfills=null},_processValue:function(a,b){var f;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(f=Q(a)){a instanceof
h?a.then(p(this._processResolveValue,this),p(this._processRejectReason,this)):(new h(f,a)).then(p(this._processResolveValue,this),p(this._processRejectReason,this));return}}catch(c){0==this._state&&this._doReject(c);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)g(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)g(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new h,e=this._state;0==e||0!=this._wait?(a&&t(a)?this._fulfills.push([f(a,c),null]):this._fulfills.push([c.resolve,c]),b&&t(b)?this._rejects.push([f(b,c),null]):this._rejects.push([c.reject,c])):1==e?a&&t(a)?g(f(a,c),null,[this._value]):c.resolve(this._value):2==e&&(b&&t(b)?g(f(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,
this._value)}catch(f){N(f)}},done:function(a,b){var f=this._state;if(1==f&&0==this._wait)try{a.call(b||null,this._value)}catch(c){N(c)}else 0==f&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(f){N(f)}},fail:function(a,b){var f=this._state;if(2==f&&0==this._wait)try{a.call(b||null,this._reason)}catch(c){N(c)}else 0==f&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},
promise:function(){return{then:p(this.then,this),done:p(this.done,this),fail:p(this.fail,this),always:p(this.always,this)}},after:function(a){var b=this;if(Q(a)){b._wait++;var f=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};t(a.done)?a.done(f):a.then(f)}return b}},!0,!1);h.fcall=function(a,b,f){return h.resolve(a.apply(b,f||[]))};h.resolve=function(a){var b=new h;b.resolve(a);return b};h.reject=function(a){var b=new h;b.reject(a);return b};
h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,f=a.length,c=Array(f),e=f,g,k,m=function(a,d){c[d]=a;e--;0==e&&b.resolve(c)};for(g=0;g<f;g++)(function(f){k=a[g];k instanceof h?k.done(function(a){m(a,f)}).fail(b.reject,b):Q(k)||t(k)?(new h(k)).done(function(a){m(a,f)}).fail(b.reject,b):m(k,f)})(g);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,f=a.length,c=[],e=f,g,k,m=function(a){c.push(a);p()},p=function(){e--;
0==e&&b.resolve(c)};for(g=0;g<f;g++)k=a[g],k instanceof h?k.done(m).fail(p):Q(k)||t(k)?(new h(k)).done(m).fail(p):m(k);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,f=a.length,c,e;for(c=0;c<f&&(e=a[c],e instanceof h?e.done(b.resolve,b).fail(b.reject,b):Q(e)||t(e)?(new h(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());c++);return b};h.waterfall=function(a){if(!a.length)return h.resolve(null);for(var b=a.shift(),b=t(b)?h.fcall(b):h.resolve(f),f;f=a.shift();)Q(f)?
b=b.then(function(a){return function(){return a}}(f)):t(f)?b=b.then(f):b.resolve(f);return b};h.counter=function(a){var b=new h;b.countdown=function(){a--;0==a&&b.resolve()};return b};return h}(),Ia=function(){var a=/#.*$/,c=/([?&])_=[^&]*/,b=/\?/,e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g=/^(?:GET|HEAD)$/i,f=function(a,b,d){var c,e;e=Z(a);if(3>e&&-1<e&&d)b.push(encodeURIComponent(d)+"="+encodeURIComponent(""+a));else if(Y(a)&&d)for(c=0,e=a.length;c<e;c++)f(a[c],b,d+"["+c+"]");
else if(aa(a))for(c in a)a.hasOwnProperty(c)&&f(a[c],b,d?d+"["+c+"]":c)},h=function(d,e){d.replace(a,"");if(!1===e.cache){var h=(new Date).getTime();d=c.test(d)?d.replace(c,"$1_="+h):d+(b.test(d)?"&":"?")+"_="+h}!e.data||window.FormData&&e.data instanceof window.FormData||(w(e.data)?h=e.data:(h=[],f(e.data,h,null),h=h.join("&").replace(/%20/g,"+")),e.data=h,g.test(e.method)&&(d+=(b.test(d)?"&":"?")+e.data,e.data=null));return d},d={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",
json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},l={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},n={},q=new pa,B=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?
(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},C=function(a,b,d){var f,c;if(!aa(a)&&!t(a)&&d)f=document.createElement("input"),f.setAttribute("type","hidden"),f.setAttribute("name",d),f.setAttribute("value",a),b.appendChild(f);else if(Y(a)&&d)for(f=0,c=a.length;f<c;f++)C(a[f],b,d+"["+f+"]");else if(aa(a))for(f in a)a.hasOwnProperty(f)&&C(a[f],b,d?d+"["+f+"]":f)},z=function(a){for(var b,d,f="",c=0;c<a.elements.length;c++)if(b=a.elements[c],
null!==k(b,"name"))if(d="INPUT"===b.nodeName.toUpperCase()?k(b,"type").toUpperCase():"TEXT","FILE"===d)for(d=0;d<b.files.length;f+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[d++].name));else if("RADIO"!==d&&"CHECKBOX"!==d||b.checked)f+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return f},s=function(a,b,d){var f=b?b.dataType:null;b=b?b.selector:null;if(!w(a))return a;d=d||"";if("xml"===f||!f&&0<=d.indexOf("xml"))return a=ta(M(a)),b?K(b,a):a;if("html"===f)return a=
ta(a,"text/html"),b?K(b,a):a;if("fragment"==f){d=document.createDocumentFragment();f=document.createElement("div");for(f.innerHTML=a;f.firstChild;)d.appendChild(f.firstChild);return d}if("json"===f||!f&&0<=d.indexOf("json"))return Ha(M(a));("script"===f||!f&&0<=d.indexOf("javascript"))&&B(a);return a+""},v=function(a){var b=e.exec((window?window.location.href:"").toLowerCase())||[],d=e.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!d||d[1]===b[1]&&d[2]===b[2]&&(d[3]||
("http:"===d[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new qa;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):z(a.form));a.url=h(a.url,a);d=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new J(a,b,this):new H(a,b,this):new I(a,b,this);this._deferred=b;this._transport=d;b.done(function(a){q.trigger("success",
a)});b.fail(function(a){q.trigger("error",a)});b.always(function(){q.trigger("end")});q.trigger("start");a.timeout&&(this._timeout=setTimeout(p(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===q.trigger("before-send",a,d)&&(this._promise=qa.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,d)&&(this._promise=qa.reject());this._promise||(sa(d.send,d),b.abort=p(this.abort,this),b.always(this.destroy,this),this._promise=b)};m(v.prototype,{_jsonpName:null,_transport:null,
_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);C(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,d=a.jsonpParam||
"callback",f=a.jsonpCallback||"jsonp_"+ca();a.url+=(b.test(a.url)?"&":"?")+d+"="+f;this._jsonpName=f;"undefined"!=typeof window&&(window[f]=p(this.jsonpCallback,this));"undefined"!=typeof global&&(global[f]=p(this.jsonpCallback,this));return f},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(d){this._deferred?this._deferred.reject(d):N(d)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,b){var d=this._opt;a=s(a,d,b);q.hasListener("process-response")&&
(a=q.trigger("process-response",a,this._deferred));d.processResponse&&(a=d.processResponse.call(d.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var d=this._deferred,f;if(this._opt.jsonp)if(a){try{B(a)}catch(c){d.reject(c)}d.isPending()&&d.reject("jsonp script didn't invoke callback")}else d.reject("jsonp script is empty");else{try{f=this.processResponseData(a,b)}catch(e){d.reject(e)}d.resolve(f)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&
this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();this._form=this._timeout=this._promise=this._deferred=this._opt=this._transport=null;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0,!1);var r=function(a,b){b=b||{};a&&!w(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=k(b.form,"action")),!b.url))throw"Must provide url";m(b,n,!1,!0);m(b,l,!1,!0);b.method=
b.method?b.method.toUpperCase():b.form?k(b.form,"method").toUpperCase()||"GET":"GET";return(new v(b)).promise()};r.setup=function(a){m(n,a,!0,!0)};r.on=function(){q.on.apply(q,arguments)};r.un=function(){q.un.apply(q,arguments)};r.get=function(a,b){b=b||{};b.method="GET";return r(a,b)};r.post=function(a,b){b=b||{};b.method="POST";return r(a,b)};r.load=function(a,b,d){d=d||{};w(b)||(d=b);d.dataType="fragment";return r(b,d).done(function(b){if(d.replace)for(;a.firstChild;)a.removeChild(a.firstChild);
a.appendChild(b)})};r.loadScript=function(a){return r(a,{transport:"script"})};r.submit=function(a,b){b=b||{};b.form=a;return r(null,b)};var H=function(a,b,d){var f;if(!(window.XMLHttpRequest&&(f=new XMLHttpRequest)||(f=new ActiveXObject("Msxml2.XMLHTTP"))||(f=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=f;this._deferred=b;this._opt=a;this._ajax=d;a.progress&&L(f,"progress",p(a.progress,a.callbackScope));a.uploadProgress&&f.upload&&L(f.upload,"progress",p(a.uploadProgress,
a.callbackScope));f.onreadystatechange=p(this.onReadyStateChange,this)};m(H.prototype,{_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,f;if(a.xhrFields)for(f in a.xhrFields)b[f]=a.xhrFields[f];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&d[a.dataType]?d[a.dataType]+", */*; q=0.01":d._default);for(f in a.headers)b.setRequestHeader(f,a.headers[f])},
onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=D,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=D;var d;a:{try{d=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(f){}d=!1}d?this._ajax.processResponse(w(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=D;this._xhr.abort()},
send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred&&this._deferred.reject(b)}},destroy:function(){this._ajax=this._opt=this._deferred=this._xhr=null}},!0,!1);var I=function(a,b,d){this._opt=a;this._ajax=d;this._deferred=b};m(I.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset",
"utf-8");a.setAttribute("src",this._opt.url);L(a,"load",p(this.onLoad,this));L(a,"error",p(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);var J=function(a,b,
d){this._opt=a;this._ajax=d;this._deferred=b};m(J.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ca(),d=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);d.setAttribute("action",this._opt.url);d.setAttribute("target",b);L(a,"load",p(this.onLoad,this));L(a,"error",p(this.onError,this));this._el=a;try{d.submit()}catch(f){this._deferred.reject(f)}},onLoad:function(){var a=
this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);return r}(),I=function(){var a=/\r/,c={option:function(a){var c=a.getAttribute("value")||a.value;
return void 0!=c?c:M(a.innerText||a.textContent)},select:function(a){for(var c,g=a.options,f=a.selectedIndex,h=(a="select-one"===a.type||0>f)?null:[],d=a?f+1:g.length,l,n=0>f?d:a?f:0;n<d;n++)if(c=g[n],l=c.disabled||c.parentNode.disabled,(c.selected||n===f)&&!l){c=I(c);if(a)return c;h.push(c)}return h},radio:function(a){return ka(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return ka(a.getAttribute("value"))?"on":a.value}};return function(b){var e,g;if((e=c[b.type]||c[b.nodeName.toLowerCase()])&&
void 0!==(g=e(b,"value")))return g;g=b.value;return w(g)?g.replace(a,""):null==g?"":g}}(),ga=Array.prototype.indexOf;ga||(ga=Array.prototype.indexOf=function(a,c){var b;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),g=e.length>>>0;if(0===g)return-1;b=+c||0;Infinity===Math.abs(b)&&(b=0);if(b>=g)return-1;for(b=Math.max(0<=b?b:g-Math.abs(b),0);b<g;){if(b in e&&e[b]===a)return b;b++}return-1});var xa=function(){var a={select:function(a,b){for(var e,g,f=a.options,
h=fa(b),d=f.length,l,n=-1;d--;)g=f[d],(l=h?-1!=ga.call(h,g.value):!1)?(g.setAttribute("selected","selected"),e=g.selected=!0):g.removeAttribute("selected"),l||ka(k(g,"mjs-default-option"))||(n=d);e||(a.selectedIndex=n);return h}};a.radio=a.checkbox=function(a,b){if(Y(b)){var e;e=I(a);e=b?-1!=ga.call(b,e):!1;return a.checked=e}};return function(c,b){if(1===c.nodeType){null===b?b="":1===Z(b)&&(b+="");var e=a[c.type]||a[c.nodeName.toLowerCase()];e&&void 0!==e(c,b,"value")||(c.value=b)}}}(),ya=function(){return function c(b){if(b===
window)return!0;if(3==b.nodeType)return b.parentElement?c(b.parentElement):!0;var e=window.document.documentElement;return b===e?!0:e.contains(b)}}(),Ja=function(){var a=null;return function(){null===a&&(a=parseInt((/android (\d+)/i.exec(navigator.userAgent)||[])[1],10)||!1);return a}}(),Ka=function(){var a;return function(){if(null===a){var c=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(c)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(c)||[])[1],10)||!1)}return a}}(),za=
function(){var a={},c;return function(b){if(void 0===a[b]){if("input"==b&&9==Ka())return a[b]=!1;c||(c=window.document.createElement("div"));a[b]=!!("on"+b in c)}return a[b]}}(),ha=function(){var a={};return function(c,b,e){c=c._mjsid||(c._mjsid=ca());var g=a[c];return void 0!==e?(g||(g=a[c]={}),g[b]=e):g?g[b]:void 0}}(),La=function(){var a=/(^|[^a-z0-9_$\]\)'"])(\.)([^0-9])/ig,c=Function,b=function(a,b){return function(b){var d=J.call(arguments);d.push(null);d.push(a);d=a.apply(null,d);return void 0===
d||"number"==typeof d&&isNaN(d)?void 0:d}},e={},g=0,f={},h=0,d={},l=0,n=function(){1E3<=g&&(e={});1E3<=h&&(f={});1E3<=l&&(d={})};return{createGetter:function(d){try{return e[d]?e[d]:(g++,e[d]=b(new c("____","$$interceptor","$$itself","".concat("try {","return ",d.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(f){return N(f),D}},createSetter:function(d){try{if(!f[d]){h++;var e=d.replace(a,"$1____.$3");return f[d]=b(new c("____","$$$$","$$interceptor","$$itself",
"".concat("try {",e," = $$$$",";} catch (thrownError) { return undefined; }")))}return f[d]}catch(g){return N(g),D}},createFunc:function(f){try{return d[f]?d[f]:(l++,d[f]=b(new c("____","$$interceptor","$$itself","".concat("try {",f.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(e){return N(e),D}},resetCache:n,enableResetCacheInterval:function(){setTimeout(n,1E4)}}}().createGetter,Da=/-./g,Ma=function(){return function(a){if(a.dataset)return a.dataset;var c;if(void 0!==
(c=ha(a,"data")))return c;c=a.attributes;var b={},e,g,f;e=0;for(g=c.length;e<g;e++)f=c[e].name,0===f.indexOf("data-")&&(b[Ca(f.substr(5))]=c[e].value);c=b;ha(a,"data",c);return c}}(),X=function(a,c,b){if(a.$$input){if(c)a.$$input.on("change",c,b);return a.$$input}var e;var g=void 0;e=ha(a,"config");var f,h;if(!e){e={};if(g||null!==(g=k(a,"mjs-config")))for(f in a.removeAttribute("mjs-config"),g=g?La(g)({}):{},g)e[f]=g[f];g=Ma(a);for(f in g)h=g[f],e[f]=""===h?!0:h;ha(a,"config",e)}this.observable=
new pa;this.el=a;this.inputType=a.type.toLowerCase();this.dataType=e.type||this.inputType;this.listeners=[];if(c)this.onChange(c,b)};m(X.prototype,{el:null,inputType:null,dataType:null,listeners:null,radio:null,keydownDelegate:null,changeInitialized:!1,destroy:function(){var a;this.observable.destroy();this._addOrRemoveListeners(va,!0);this.el.$$input=null;for(a in this)this.hasOwnProperty(a)&&(this[a]=null)},_addOrRemoveListeners:function(a,c){var b=this.inputType,e=this.listeners,g=this.radio,f=
this.el,h,d,l,n;d=0;for(l=e.length;d<l;d++)if(h=!!e[d][2],h==c){if("radio"==b)for(h=0,n=g.length;h<n;h++)a(g[h],e[d][0],e[d][1]);else a(f,e[d][0],e[d][1]);e[d][2]=!c}},initInputChange:function(){var a=this.inputType;"radio"==a?this.initRadioInput():"checkbox"==a?this.initCheckboxInput():this.initTextInput();this._addOrRemoveListeners(L,!1);this.changeInitialized=!0},initRadioInput:function(){var a=this.el,c=a.name;if(ya(a))a=a.ownerDocument;else for(;a.parentNode;)a=a.parentNode;this.radio=K("input[name="+
c+"]",a);this.onRadioInputChangeDelegate=p(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate,!1])},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=p(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate,!1])},initTextInput:function(){var a=!1,c=this,b=c.listeners,e;Ja()||(b.push(["compositionstart",function(){a=!0},!1]),b.push(["compositionend",function(){a=!1;g()},!1]));var g=c.onTextInputChangeDelegate=
function(){if(!a)c.onTextInputChange()},f=function(a){e||(e=setTimeout(function(){g(a);e=null},0))},h=function(a){a=a||window.event;var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||f(a)};za("input")?b.push(["input",g,!1]):(b.push(["keydown",h,!1]),za("paste")&&(b.push(["paste",f,!1]),b.push(["cut",f,!1])));b.push(["change",g,!1])},processValue:function(a){switch(this.dataType){case "number":a=parseInt(a,10);isNaN(a)&&(a=0);break;case "bool":case "boolean":return!("false"===a||"0"===a||0===a||"off"===
a||!1===a||""===a)}return a},onTextInputChange:function(){var a=this.getValue();this.observable.trigger("change",this.processValue(a))},onCheckboxInputChange:function(){var a=this.el;this.observable.trigger("change",this.processValue(a.checked?k(a,"value")||!0:!1))},onRadioInputChange:function(a){a=a||window.event;this.observable.trigger("change",this.processValue((a.target||a.srcElement).value))},setValue:function(a){var c=this.inputType,b,e;a=this.processValue(a);if("radio"==c)for(c=this.radio,
b=0,e=c.length;b<e;b++)c[b].checked=this.processValue(c[b].value)==a;else"checkbox"==c?(c=this.el,c.checked=!0===a||a==this.processValue(c.value)):xa(this.el,a)},getValue:function(){var a=this.inputType,c,b;if("radio"==a){a=this.radio;c=0;for(b=a.length;c<b;c++)if(a[c].checked)return this.processValue(a[c].value);return null}return"checkbox"==a?this.processValue(this.el.checked?k(this.el,"value")||!0:!1):this.processValue(I(this.el))},onChange:function(a,c){this.changeInitialized||this.initInputChange();
this.observable.on("change",a,c)},unChange:function(a,c){this.observable.un("change",a,c)},onKey:function(a,c,b){this.keydownDelegate||(this.keydownDelegate=p(this.keyHandler,this),this.listeners.push(["keydown",this.keydownDelegate,!1]),L(this.el,"keydown",this.keydownDelegate),this.observable.createEvent("key",!1,!1,this.keyEventFilter));this.observable.on("key",c,b,{key:a})},unKey:function(a,c,b){this.observable.un("key",c,b)},keyEventFilter:function(a,c){var b=a.key,e=c[0];return"object"!=typeof b?
b==e.keyCode:void 0!==b.ctrlKey&&b.ctrlKey!=e.ctrlKey||void 0!==b.shiftKey&&b.shiftKey!=e.shiftKey?!1:!(void 0!==b.keyCode&&b.keyCode!=e.keyCode)},keyHandler:function(a){a=new O(a||window.event);this.observable.trigger("key",a)}},!0,!1);X.get=function(a){return a.$$input?a.$$input:new X(a)};X.getValue=I;X.setValue=xa;s.register("validator.messages",{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",rangelength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",
min:"Please enter a value greater than or equal to {0}."});s.register("validator.checkable",function(a){return/radio|checkbox/i.test(a.type)});(function(){var a=s.get("validator.checkable");return s.register("validator.getLength",function(c,b){var e=0;switch(b.nodeName.toLowerCase()){case "select":return la(b,function(a){a.selected&&e++}),e;case "input":if(a(b)){if(b.form)la(b.form,function(a){a.type==b.type&&a.name==b.name&&a.checked&&e++});else{var g,f,h;if(ya(b))g=b.ownerDocument;else for(g=b;g.parentNode;)g=
g.parentNode;g=K("input[name="+b.name+"]",g);f=0;for(h=g.length;f<h;f++)g[f].checked&&e++}return e}}return c.length})})();(function(){var a=s.get("validator.checkable"),c=s.get("validator.getLength");return s.register("validator.empty",function(b,e){if(!e)return void 0==b||""===b;switch(e.nodeName.toLowerCase()){case "select":var g=I(e);return!g||0==g.length;case "input":if(a(e))return 0==c(b,e)}return 0==M(b).length})})();(function(){var a=s.get("validator.empty"),c=s.get("validator.getLength");
return s.register("validator.methods",{required:function(b,c,g){return!1===g?!0:!a(b,c)},regexp:function(b,c,g){g=g instanceof RegExp?g:new RegExp(g);return a(b,c)||g.test(b)},notregexp:function(b,c,g){g=g instanceof RegExp?g:new RegExp(g);return a(b,c)||!g.test(b)},minlength:function(b,e,g){return a(b,e)||(e?c(M(b),e)>=g:b.toString().length>=g)},maxlength:function(b,e,g){return a(b,e)||(e?c(M(b),e)<=g:b.toString().length<=g)},rangelength:function(b,e,g){var f=e?c(M(b),e):b.toString().length;return a(b,
e)||f>=g[0]&&f<=g[1]},min:function(b,c,g){return a(b,c)||parseInt(b,10)>=g},max:function(b,c,g){return a(b,c)||parseInt(b,10)<=g},range:function(b,c,g){b=parseInt(b,10);return a(b,c)||b>=g[0]&&b<=g[1]},email:function(b,c){return a(b,c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(b)},
url:function(b,c){return a(b,c)||rUrl.test(b)},date:function(b,c){return a(b,c)||!/Invalid|NaN/.test(new Date(b))},dateiso:function(b,c){return a(b,c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(b)},number:function(b,c){return a(b,c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(b)},digits:function(b,c){return a(b,c)||/^\d+$/.test(b)},creditcard:function(b,c){if(a(b,c))return!0;if(/[^0-9-]+/.test(b))return!1;var g=0,f=!1,h;b=b.replace(/\D/g,"");for(var d=b.length-1;0<=d;d--)h=b.charAt(d),h=parseInt(h,
10),f&&9<(h*=2)&&(h-=9),g+=h,f=!f;return 0==g%10},accept:function(b,c,g){g=w(g)?g.replace(/,/g,"|"):"png|jpe?g|gif";return a(b,c)||b.match(new RegExp(".("+g+")$","i"))},equalto:function(a,c,g,f){g=(c=f.getValidator().getField(g))?c.getElem():g;return a==I(g)},notequalto:function(a,c,g,f){g=(c=f.getValidator().getField(g))?c.getElem():g;return a!=I(g)},zxcvbn:function(a,c,g){return zxcvbn(a).score>=parseInt(g)}})})();s.register("validator.format",function(a,c){if(t(c))return a;Y(c)||(c=[c]);var b,
e=c.length;for(b=-1;++b<e;a=a.replace(new RegExp("\\{"+b+"\\}","g"),c[b]));return a});s.register("mixin.Observable",{$$observable:null,$$callbackContext:null,$beforeInit:function(a){this.$$observable=new pa;if(a&&a.callback){var c=a.callback,b=c.context||c.scope,e;c.context=null;c.scope=null;for(e in c)if(c[e])this.$$observable.on(e,c[e],b||this);a.callback=null;b&&(this.$$callbackContext=b)}},on:function(){var a=this.$$observable;return a.on.apply(a,arguments)},un:function(){var a=this.$$observable;
return a.un.apply(a,arguments)},once:function(){var a=this.$$observable;return a.once.apply(a,arguments)},trigger:function(){var a=this.$$observable;return a.trigger.apply(a,arguments)},$beforeDestroy:function(){this.$$observable.trigger("before-destroy",this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();this.$$observable=null}});(function(){var a={allowSubmit:!0,alwaysCheck:!1,alwaysDisplayState:!1,data:null,ignore:null,disabled:!1,cls:{valid:"",
error:"",ajax:""},errorBox:{cls:"",fn:null,tag:"",position:"after",elem:null,enabled:!0},callback:{scope:null,destroy:null,statechange:null,errorchange:null,submit:null,check:null,beforeAjax:null,afterAjax:null,displaystate:null},rules:{},messages:{}},c=function(a){if(!a)return{};var b=function(b,f,c){var h=a[b],e=!1;if(void 0!==h){switch(c){case "string":e=w(h);break;case "function":e=t(h);break;case "boolean":e=ja(h)}e&&(a[b]={},a[b][f]=h)}};b("errorBox","enabled","boolean");b("errorBox","tag",
"string");b("errorBox","fn","function");return a},b=s.get("validator.messages"),e=s.get("validator.methods"),g=s.get("validator.empty"),f=s.get("validator.format"),h=oa({$class:"validator.Field",$mixins:["mixin.Observable"],vldr:null,elem:null,rules:null,cfg:null,input:null,enabled:!0,valid:null,dirty:!1,id:null,prev:"",error:null,errorRule:null,pending:null,rulesNum:0,displayState:!1,data:null,checking:!1,checkTmt:null,errorBox:null,customError:!1,$init:function(d,f,e){f=f||{};var g;this.cfg=g=m({},
a,c(h.defaults),c(f),!0,!0);this.input=X.get(d);this.input.onChange(this.onInputChange,this);this.input.onKey(13,this.onInputSubmit,this);this.elem=d;this.vldr=e;this.enabled=!d.disabled;this.id=k(d,"name")||k(d,"id");this.data=f.data;this.rules={};g.messages=m({},b,g.messages,!0,!0);f=e.getVldId();d.setAttribute("data-validator",f);this.input.radio&&this.initRadio();g.rules&&this.setRules(g.rules,!1);this.readRules();this.prev=this.input.getValue();g.disabled&&this.disable()},getValidator:function(){return this.vldr},
initRadio:function(){var a=this.input.radio,b=this.vldr.getVldId(),f,c;f=0;for(c=a.length;f<c;f++)a[f].setAttribute("data-validator",b)},setRules:function(a,b){b=void 0==b?!0:b;for(var f in a)this.setRule(f,a[f],!1);b?this.check(!1):this.setValidState(null);return this},setRule:function(a,b,f){var c=this.rules;f=void 0==f?!0:f;null===b?(c[a]&&this.rulesNum--,delete c[a]):(c[a]||this.rulesNum++,c[a]=b,null!==this.valid&&this.setValidState(!1));f?this.check(!1):this.setValidState(null);return this},
setMessage:function(a,b){this.cfg.messages[a]=b;return this},setMessages:function(a){for(var b in a)this.setMessage(b,a[b]);return this},getMessages:function(){return m({},this.cfg.messages)},readRules:function(){var a=this.elem,b=a.className,f={},c,h;for(h in e)e.hasOwnProperty(h)&&(c=k(a,h)||k(a,"data-validate-"+h),void 0!=c&&!1!==c&&("minlength"!=h&&"maxlength"!=h||-1!=parseInt(c,10))&&(f[h]=c,(c=k(a,"data-message-"+h))&&this.setMessage(h,c)));if(c=k(a,"remote"))f.remote=c;if(b)for(b=b.split(" "),
h=0,c=b.length;h<c;h++)if(a=M(b[h]),e[a]||"remote"==a)f[a]=!0;for(h in f)this.setRule(h,f[h],!1)},getRules:function(){return this.rules},hasRule:function(a){return this.rules[a]?!0:!1},getValue:function(){return this.input.getValue()},getUserData:function(){return this.data},setUserData:function(a){var b=this.data;this.data=a;return b},isEmpty:function(){return g(this.getValue(),this.elem)},enable:function(){this.enabled=!0;this.vldr.reset();return this},disable:function(){this.enabled=!1;!1===this.valid&&
(this.setValidState(!0),this.doDisplayState());return this},enableDisplayState:function(){this.displayState=!0},disableDisplayState:function(){this.displayState=!1},isDisplayStateEnabled:function(){return this.displayState},toggleErrorBox:function(a){var b=this.cfg,f=b.errorBox.enabled;b.errorBox.enabled=a;!f&&a&&a.displayState&&!1===this.valid()&&this.doDisplayState()},isEnabled:function(){return this.enabled},getElem:function(){return this.elem},getName:function(){return this.id},getError:function(){return this.error},
getErrorRule:function(){return this.errorRule},isValid:function(){return this.isEnabled()?this.customError?!1:!0===this.valid&&!this.pending||0===this.rulesNum:!0},getExactValidState:function(){return this.valid},setCustomError:function(a,b){this.customError=a?!0:!1;this.setValidState(a?!1:!0);this.setError(!0===a?null:a,b);this.doDisplayState()},reset:function(){this.abort();this.dirty=!1;this.prev="";this.setValidState(null);this.setError(null);this.doDisplayState();return this},abort:function(){this.pending&&
(this.pending.abort(),this.pending=null);return this},check:function(a){var b=this.rules,c=this.cfg,h=this.elem;if(!this.isEnabled())return!0;if(this.customError)return!1;if(0==this.rulesNum&&!1!==this.valid)return!0;if(this.checking)return this.checkTmt||(this.checkTmt=setTimeout(p(this.checkTimeout,this),100)),!0===this.valid;this.checking=!0;if(!(!0===a||b.equalTo||b.notEqualTo||this.dirty||null===this.valid||c.alwaysCheck))return this.pending||this.doDisplayState(),this.checking=!1,!0===this.valid;
var g=!0,k=!1,m=this.getValue(),s,v;for(v in b)if("remote"==v){if(this.dirty||c.alwaysCheck||null===this.valid||!0===a)if(m||b[v].checkEmpty)k=!0}else if(!0!==(s=(t(b[v])?b[v]:e[v]).call(this.$$callbackContext,m,h,b[v],this))){g=!1;this.setError(f(s||c.messages[v]||"",b[v]),v);break}k=k&&g;g&&this.setError(null);k?this.ajaxCheck():(this.setValidState(g),this.doDisplayState());this.checking=this.dirty=!1;this.trigger("check",this,this.valid);return!0===this.valid&&!k},doDisplayState:function(){var a=
this.cfg,b=this.isValid(),f=a.cls.error,c=a.cls.valid,h=this.elem;this.displayState||a.alwaysDisplayState||(b=null);null===this.valid&&(b=null);f&&(!1===b?P(h,f):H(h,f));c&&(!0===b?P(h,c):H(h,c));f=this.getErrorBox();c=this.error;f&&(!1===b&&c&&(f.innerHTML=state.error),f.style.display=!1===b&&c&&a.errorBox.enabled?"block":"none");this.trigger("display-state",this,b,this.error)},getErrorBox:function(){var a=this.cfg.errorBox;return a.tag||a.fn||a.selector?(!this.errorBox&&a.enabled&&this.createErrorBox(),
this.errorBox):null},destroy:function(){this.elem.removeAttribute("data-validator");this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox);this.input.destroy()},isPending:function(){return null!==this.pending},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("state-change",this,a))},setError:function(a,b){if(this.error!=a||this.errorRule!=b)this.error=a,this.errorRule=b,this.trigger("error-change",this,a,b)},checkTimeout:function(){this.checkTmt=null;this.checking||
this.check(!1)},onInputChange:function(a){this.prev!==a&&(this.dirty=!0,this.customError=!1,this.abort(),this.pending||this.check(!1),this.prev=this.input.getValue())},onInputSubmit:function(a){a=new O(a);if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||!1!==this.trigger("submit",this,a)))return a.preventDefault(),!1},createErrorBox:function(){var a=this.cfg.errorBox,b=a.tag,f=a.cls,c=a.fn,h=a.position,a=a.elem;c?this.errorBox=c.call(this.$$callbackContext,this):a?this.errorBox=a:(this.errorBox=
window.document.createElement(b),this.errorBox.className=f,b=(b=this.input.radio)?b[b-1]:this.elem,"appendParent"==h?b.parentNode.appendChild(this.errorBox):"before"==h?b.parentNode.insertBefore(this.errorBox,b):b.parentNode.insertBefore(this.errorBox,b.nextSibling))},ajaxCheck:function(){var a=this.elem,b=this.rules.remote,f=this.getValue(),c=this.cfg,b=m({},w(b)?{url:b}:b,!0);b.data=b.data||{};b.data[b.paramName||k(a,"name")||k(a,"id")]=f;b.handler||(b.dataType="text");b.cache=!1;c.cls.ajax&&P(a,
c.cls.ajax);this.trigger("before-ajax",this,b);this.pending=Ia(b);this.pending.done(p(this.onAjaxSuccess,this));this.pending.fail(p(this.onAjaxError,this))},onAjaxSuccess:function(a){var b=this.rules,c=this.cfg;this.pending=null;var h=!0;b.remote.handler?(a=b.remote.handler.call(this.$$callbackContext,this,a),!0!==a&&(this.setError(f(a||c.messages.remote||"",b.remote),"remote"),h=!1)):a?(this.setError(a,"remote"),h=!1):this.setError(null);c.cls.ajax&&H(this.elem,c.cls.ajax);this.setValidState(h);
this.doDisplayState();this.trigger("after-ajax",this)},onAjaxError:function(a,b){var f=this.cfg;f.cls.ajax&&H(this.elem,f.cls.ajax);this.pending=null;"abort"!=b&&"abort"!=a&&(this.setValidState(!1),this.doDisplayState(),this.trigger("after-ajax",this))}},{defaults:{},messages:{}});return h})();(function(){var a={alwaysCheck:!1,alwaysDisplayState:!1,disabled:!1,value:null,elem:null,errorBox:null,errorField:null,data:null,cls:{valid:"",error:""},fields:[],rules:{},messages:{},callback:{scope:null,destroy:null,
statechange:null,errorchange:null,displaystate:null}},c=s.get("validator.messages"),b=s.get("validator.methods"),e=s.get("validator.format"),g=oa({$class:"validator.Group",$mixins:["mixin.Observable"],fields:null,rules:null,cfg:null,vldr:null,enabled:!1,invalid:null,valid:null,displayState:!1,rulesNum:0,error:null,data:null,errorBox:null,el:null,$init:function(b,h){b=b||{};var d;this._vldr=h;this.cfg=d=m({},a,g.defaults,b,!0,!0);this.data=b.data;this.el=b.elem;this.fields={};this.rules={};d.messages=
m({},c,d.messages,!0,!0);var e,n;d.rules&&this.setRules(d.rules,!1);if(d.fields)for(e=0,n=b.fields.length;e<n;e++)this.add(h.getField(d.fields[e]));this.enabled=!d.disabled},enable:function(){this.enabled=!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},isValid:function(){return!this.enabled||0===this.invalid&&!0===this.valid},getExactValidState:function(){return this.valid},reset:function(){this.invalid=0;this.setValidState(null);this.setError(null);
this.doDisplayState();return this},getUserData:function(){return this.data},getName:function(){return this.cfg.name},setRules:function(a,b){b=void 0==b?!0:b;for(var d in a)this.setRule(d,a[d],!1);b?this.check():this.setValidState(null);return this},setRule:function(a,b,d){var c=this.rules;d=void 0==d?!0:d;null===b?(c[a]&&this.rulesNum--,delete c[a]):(c[a]||this.rulesNum++,c[a]=b,null!==this.valid&&this.setValidState(!1));d?this.check():this.setValidState(null);return this},getRules:function(){return m({},
this.rules)},hasRule:function(a){return this.rules[a]?!0:!1},setError:function(a){var b=this.cfg;this.error!=a&&(b.errorField?(this.vldr.getField(b.errorField).setError(a),this.error=null):(this.error=a,this.trigger("error-change",this,a)))},getError:function(){return this.error},getFields:function(){return this.fields},enableDisplayState:function(){this.displayState=!0;return this},disableDisplayState:function(){this.displayState=!1;return this},check:function(){var a=this.cfg,c=this.fields,d=this.rules;
if(!this.enabled||0==this.rulesNum)return this.setValidState(null),this.doDisplayState(),!0;this.countInvalid();if(0<this.invalid)return this.setValidState(null),this.doDisplayState(),!0;var g={},n=!0,k=null,m;if(a.value){for(m in c)g[m]=c[m].getValue();k=a.value.call(this.$$callbackContext,g,this)}for(m in d)if(!0!==(c=(t(d[m])?d[m]:b[m]).call(this.$$callbackContext,k,null,d[m],this,g))){n=!1;c||a.messages[m]?this.setError(e(c||a.messages[m]||"",d[m])):this.setError(null);break}n&&this.setError(null);
this.setValidState(n);this.doDisplayState();return!0===this.valid},doDisplayState:function(){var a=this.valid,b=this.cfg;this.displayState||b.alwaysDisplayState||(a=null);if(b.errorBox){var d=this.getErrorBox();null!==a?d&&(d.innerHTML=this.error||"",d.style.display=!1===this.valid?"block":"none"):d&&(d.style.display="none")}d=b.cls.error;b=b.cls.valid;a=this.valid;d&&(!1===a?P(this.el,d):H(this.el,d));b&&(!0===a?P(this.el,b):H(this.el,b));this.trigger("display-state",this,this.valid)},getErrorBox:function(){var a=
this.cfg,b=this.fields,d=a.errorBox;if(b[d])return b[d].getErrorBox();this.errorBox||(t(a.errorBox)?this.errorBox=a.errorBox.call(this.$$callbackContext,this):this.errorBox=a.errorBox);return this.errorBox},destroy:function(){var a=this.fields,b;for(b in a)a[b]&&this.setFieldEvents(a[b],"un");this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox)},add:function(a){var b=this.fields,d=a.getName();b[d]||(b[d]=a,this.setFieldEvents(a,"on"))},setFieldEvents:function(a,b){a[b]("state-change",
this.onFieldStateChange,this)},remove:function(a){var b=this.fields,d=a.getName();b[d]&&(delete b[d],this.setFieldEvents(a,"un"));return this},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("state-change",this,a))},countInvalid:function(){var a=this.fields;this.invalid=0;for(var b in a)this.invalid+=a[b].isValid()?0:1},onFieldStateChange:function(a,b){this.trigger("field-state-change",this,a,b);this.check()}},{defaults:{}});return g})();var Aa=function(){var a={},c=ma.validator.Field,
b=ma.validator.Group,e={form:null,all:{},fields:{},rules:{},cls:{valid:"",error:"",checking:""},groups:{},callback:{scope:null,destroy:null,reset:null,beforesubmit:null,submit:null,statechange:null,check:null,displaystate:null,displaystatechange:null}},g=oa({$class:"Validator",$mixins:["mixin.Observable"],id:null,el:null,cfg:null,enabled:!1,invalid:null,pending:0,grps:0,outside:!0,submitted:!1,displayState:!1,isForm:!1,isField:!1,submitButton:null,hidden:null,preventFormSubmit:!1,fields:null,groups:null,
$init:function(b,c,d){var l=b.nodeName.toLowerCase();this.id=ca();a[this.id]=this;b.setAttribute("data-validator",this.id);this.el=b;c&&!w(c)&&(d=c,c=null);this.cfg=b=m({},e,g.defaults,g[c],d,!0,!0);this.isForm="form"==l;this.isField=/input|select|textarea/.test(l);this.fields={};this.groups={};this.$$observable.createEvent("submit",!1);this.$$observable.createEvent("beforesubmit",!1);this.onRealSubmitClickDelegate=p(this.onRealSubmitClick,this);this.resetDelegate=p(this.reset,this);this.onSubmitClickDelegate=
p(this.onSubmitClick,this);this.onFormSubmitDelegate=p(this.onFormSubmit,this);var n;this.initFields();l=this.fields;for(n in b.rules)l[n]&&l[n].setRules(b.rules[n],!1);b.rules=null;for(n in b.groups)this.addGroup(n,b.groups[n]);this.initForm("bind");delete b.rules;delete b.fields;delete b.groups;this.enabled=!0},getVldId:function(){return this.id},getElem:function(){return this.el},getGroup:function(a){return this.groups[a]||null},getField:function(a){return this.fields[a]||null},enable:function(){this.enabled=
!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},enableDisplayState:function(){var a=this.fields,b=this.groups,d;if(!0!==this.displayState){this.displayState=!0;for(d in a)a[d].enableDisplayState();for(d in b)b[d].enableDisplayState();this.trigger("display-state-change",this,!0)}return this},disableDisplayState:function(){var a=this.groups,b=this.fields,d;if(!1!==this.displayState){this.displayState=!1;for(d in b)b[d].disableDisplayState();
for(d in a)a[d].disableDisplayState();this.trigger("display-state-change",this,!1)}return this},isDisplayStateEnabled:function(){return this.displayState},isValid:function(){return!1===this.enabled?!0:0===this.invalid&&0===this.pending&&0===this.grps&&!0===this.outside},getErrors:function(a){var b=!0==a?[]:{},d,c,e,g=[this.fields,this.groups],k;if(!this.isEnabled())return b;for(e=0;2>e;e++)for(c in k=g[e],k)null===k[c].getExactValidState()&&k[c].check(),k[c].isValid()||(d=k[c].getError())&&(a?b.push(d):
b[c]=d);return b},check:function(){var a=this.fields,b=this.groups;if(!this.isEnabled())return!0;var d=this.isValid(),c;for(c in a)a[c].check();for(c in b)b[c].check();this.outside=!1!==this.trigger("check",this);a=this.isValid();d!=a&&(this.doDisplayState(),this.trigger("state-change",this,!1));return a},add:function(a,b){var d=a.nodeName.toLowerCase(),e=a.type;if("input"!=d&&"textarea"!=d&&"select"!=d||"submit"==e||"reset"==e||"button"==e||null!==k(a,"data-no-validate")||null!==k(a,"data-validator"))return this;
var e=k(a,"name")||k(a,"id"),g=this.cfg,d=this.fields;if(!e)return this;e=g.fields&&g.fields[e]?g.fields[e]:b||{};w(e)&&(e={rules:[e]});e=m({},g.all||{},e,!0,!0);if(e.ignore)return this;e.callback||(e.callback={context:this.$$callbackContext});g=new c(a,e,this);e=g.getName();if(d[e])return this;d[e]=g;this.setFieldEvents(g,"on");this.displayState&&g.enableDisplayState();this.isEnabled()&&null!==this.invalid&&g.check();return this},addGroup:function(a,c){var d=this.groups;d[a]||(c.name=a,d[a]=new b(c,
this),this.setGroupEvents(d[a],"on"),this.isEnabled()&&null!==this.invalid&&d[a].check())},focusInvalid:function(){var a=this.fields,b;for(b in a)if(!a[b].isValid()){a[b].getElem().focus();break}},reset:function(){var a=this.fields,b=this.groups,c;this.submitted=!1;this.disableDisplayState();for(c in b)b[c].reset();for(c in a)a[c].reset();this.pending=0;this.invalid=null;this.grps=0;this.outside=!1;this.doDisplayState();this.trigger("reset",this);return this},submit:function(){var a=this.el;if(this.isForm)if(t(a.submit))!1!==
this.trigger("before-submit",this)&&!1!==this.trigger("submit",this)&&a.submit();else this.onSubmit();else this.onSubmit()},setFieldEvents:function(a,b){a[b]("state-change",this.onFieldStateChange,this);a[b]("before-ajax",this.onBeforeAjax,this);a[b]("after-ajax",this.onAfterAjax,this);a[b]("submit",this.onFieldSubmit,this);a[b]("destroy",this.onFieldDestroy,this);a[b]("error-change",this.onFieldErrorChange,this)},setGroupEvents:function(a,b){a[b]("state-change",this.onGroupStateChange,this)},initFields:function(){var a=
this.el,b,c;if(this.isField)return this.add(a),this;a=K("input, textarea, select",a);b=-1;for(c=a.length;++b<c;this.add(a[b]));return this},initForm:function(a){var b=this.el,c=b.getElementsByTagName("input"),e=K(".submit",b),g=K(".reset",b);a="bind"==a?L:va;var k,m,p,s;k=0;for(m=c.length;k<m;k++)s=c[k],p=s.type,"submit"==p?a(s,"click",this.onRealSubmitClickDelegate):"reset"==p&&a(s,"click",this.resetDelegate);k=-1;for(m=e.length;++k<m;"submit"!=e[k].type&&a(e[k],"click",this.onSubmitClickDelegate));
k=-1;for(m=g.length;++k<m;"reset"!=g[k].type&&a(g[k],"click",this.resetDelegate));this.isForm&&a(b,"submit",this.onFormSubmitDelegate)},onRealSubmitClick:function(a){a=new O(a||window.event);this.submitButton=a.target||a.srcElement;this.preventFormSubmit=!1;return this.onSubmit(a)},onSubmitClick:function(a){this.preventFormSubmit=!1;return this.onSubmit(new O(a||window.event))},onFormSubmit:function(a){a=new O(a);if(!this.isValid()||this.preventFormSubmit)return a.preventDefault(),!1},onFieldSubmit:function(a,
b){this.preventFormSubmit=!1;this.enableDisplayState();this.submitted=!0;return this.onSubmit(b)},onSubmit:function(a){this.enableDisplayState();this.isForm||(a&&a.preventDefault(),a&&a.stopPropagation());if(this.pending)return a&&a.preventDefault(),!1;var b=this.submitButton?!0:!1;this.isForm&&(this.hidden&&(this.el.removeChild(this.hidden),this.hidden=null),this.submitButton&&/input|button/.test(this.submitButton.nodeName)&&(this.hidden=window.document.createElement("input"),this.hidden.type="hidden",
this.hidden.setAttribute("name",this.submitButton.name),this.hidden.value=this.submitButton.value,this.el.appendChild(this.hidden)));this.submitButton=null;if(!this.isValid()&&(this.check(),this.onFieldStateChange(),this.pending))return a&&a.preventDefault(),!1;if(!1===this.trigger("before-submit",this)||!this.isValid())return a&&(a.preventDefault(),a.stopPropagation()),this.pending||(this.focusInvalid(),this.submitted=!1),this.trigger("failed-submit",this,b),!1;this.pending||(this.submitted=!1);
a=this.trigger("submit",this);this.preventFormSubmit=!a;return this.isForm?a:!1},onFieldDestroy:function(a){a=a.getElem();a=k(a,"name")||k(a,"id");delete this.fields[a]},onFieldErrorChange:function(a,b){this.trigger("field-error-change",this,a,b)},onFieldStateChange:function(a,b){var c=this.invalid,e=this.fields;this.invalid=0;for(var g in e)this.invalid+=e[g].isValid()?0:1;a&&this.trigger("field-state-change",this,a,b);if(null===c||null!==c&&this.invalid!==c)this.doDisplayState(),this.trigger("state-change",
this,this.isValid())},onGroupStateChange:function(){var a=this.groups,b=this.grps;this.grps=0;for(var c in a)this.grps+=a[c].isValid()?0:1;if(null===b||null!==b&&this.grps!==b)this.doDisplayState(),this.trigger("state-change",this,this.isValid())},doDisplayState:function(){var a=this.cfg,b=this.isValid(),c=a.cls.error,a=a.cls.valid,e=this.el;if(this.isField||!this.displayState)b=null;null===this.invalid&&(b=null);c&&(!1===b?P(e,c):H(e,c));a&&(!0===b?P(e,a):H(e,a));this.trigger("display-state",this,
b)},onBeforeAjax:function(){this.pending++;this.cfg.cls.ajax&&P(this.el,this.cfg.cls.ajax)},onAfterAjax:function(){var a=this.fields,b=this.cfg;this.pending=0;for(var c in a)this.pending+=a[c].isPending()?1:0;this.doDisplayState();b.cls.ajax&&H(this.el,b.cls.ajax);this.submitted&&0==this.pending&&(this.submitted=!1,this.isValid()?this.submit():this.focusInvalid())},destroy:function(){var b=this.groups,c=this.fields,d;this.reset();delete a[this.id];for(d in b)b.hasOwnProperty(d)&&b[d]&&(this.setGroupEvents(b[d],
"un"),b[d].destroy());for(d in c)c.hasOwnProperty(d)&&c[d]&&(this.setFieldEvents(c[d],"un"),c[d].destroy());this.initForm("unbind");this.cfg=this.el=this.groups=this.fields=null}},{defaults:{},addMethod:function(a,b,c){var e=s.get("validator.methods");e[a]||(e[a]=b,c&&(g.messages[a]=c))},getValidator:function(b){b=k(b,"data-validator");return a[b]||null}});return g}();window.jQuery&&(jQuery.fn.metaphorjsValidator=function(a,c,b){var e="metaphorjsValidator",g;"string"==typeof a&&"destroy"!=a&&(g=a,
a=c,c=b);c=c||"default";a=a||{};e+="-"+c;this.each(function(){var b=$(this),h=b.data(e);if("destroy"==a)h&&(h.destroy(),b.data(e,null));else{if(h)throw Error("MetaphorJs validator is already instantiated for this html element");a.form=b;a.instanceName=c;b.data(e,new Aa(g,a))}})});ba={};ba.Validator=Aa;"undefined"!=typeof global?global.MetaphorJs=ba:window.MetaphorJs=ba})();
