'use strict';(function(){function ga(a){return null===a}function A(a){return"string"==typeof a||a===""+a}function ha(a){return"object"==typeof a&&3===L(a)&&!a.nodeType&&a.constructor===Object}function ia(a){return!0===a||!1===a}function Y(a){return"object"==typeof a&&5===L(a)}function y(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function ja(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}function J(a,b){var c;if(c=b)c=!(b&&pa("(?:^|\\s)"+b+"(?!\\S)").test(a.className));
c&&(a.className+=" "+b)}function O(a,b){b&&(a.className=a.className.replace(pa("(?:^|\\s)"+b+"(?!\\S)"),""))}function Z(a){if(a&&void 0!=!a.length&&a!==""+a){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]}function m(a,b){return a.getAttribute?a.getAttribute(b):null}function ka(a,b,c){var d,f=a.childNodes;if(!1!==b.call(c,a))for(a=-1,d=f.length>>>0;++a!==d;ka(f[a],b,c));}function aa(){return!1}function ba(){return!0}function qa(a,b,c,d){setTimeout(function(){a.apply(b,
c||[])},d||0)}function K(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)qa(function(){console.log(a);b&&console.log(b)});else throw a;}function R(){}function va(a){return a.replace(wa,function(a){return a.charAt(1).toUpperCase()})}function s(a){return"function"==typeof a}function ra(a,b){var c,d;if(!a||!A(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(f){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;
return c}function P(a){if(!a)return!1;var b,c;return"object"!=(c=typeof a)&&"function"!=c?!1:s(b=a.then)?b:!1}function la(a){if(null===a||"object"!=typeof a)return!1;a=L(a);return 2<a||-1==a}var ma={},xa=Object.prototype.toString,L=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[xa.call(b)];
return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),Q=function(){return String.prototype.trim?function(a){return A(a)?a.trim():a}:function(a){return A(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),H=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=b?b:Q(a.innerText||a.textContent)},select:function(a){for(var b,f=a.options,l=a.selectedIndex,k=(a="select-one"===a.type||0>l)?null:[],n=a?l+1:f.length,p,C=0>l?n:a?l:0;C<n;C++)if(b=f[C],p=b.disabled||b.parentNode.disabled,
(b.selected||C===l)&&!p){b=H(b);if(a)return b;k.push(b)}return k},radio:function(a){return ga(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return ga(a.getAttribute("value"))?"on":a.value}};return function(c){var d,f;if((d=b[c.type]||b[c.nodeName.toLowerCase()])&&void 0!==(f=d(c,"value")))return f;f=c.value;return A(f)?f.replace(a,""):null==f?"":f}}(),W=Array.prototype.slice,v=function(){return function b(){var c=!1,d=!1,f=W.call(arguments),l=f.shift(),k,n,p;ia(f[f.length-1])&&(c=f.pop());
ia(f[f.length-1])&&(d=c,c=f.pop());for(;f.length;)if(k=f.shift())for(n in k)if(k.hasOwnProperty(n)&&void 0!==(p=k[n]))if(d)if(l[n]&&ha(l[n])&&ha(p))b(l[n],p,c,d);else{if(!0===c||void 0==l[n])ha(p)?(l[n]={},b(l[n],p,c,!0)):l[n]=p}else if(!0===c||void 0==l[n])l[n]=p;return l}}(),r=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},pa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),M=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,
b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,f=/(\[[^\]]+)~/,l=/(~|>|\+)/,k=/ +/,n=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,p=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,C=/\D/,I=/[^(]*\(([^)]*)\)/,r=/\(.*/,v=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,B=window.document,e=!!B.getElementsByClassName,h=!!B.querySelectorAll,g={"first-child":function(e){return e.parentNode.getElementsByTagName("*")[0]!==e},"last-child":function(e){for(;(e=
e.nextSibling)&&1!=e.nodeType;);return!!e},root:function(e){return"html"!==e.nodeName.toLowerCase()},"nth-child":function(e,a){var h=e.nodeIndex||0,g=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(h)return!((h+g)%b);var z=e.parentNode.firstChild;h++;do if(1==z.nodeType&&(z.nodeIndex=++h)&&e===z&&(h+g)%b)return 0;while(z=z.nextSibling);return 1},"nth-last-child":function(e,a){var h=e.nodeIndexLast||0,g=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(h)return!((h+g)%b);var z=e.parentNode.lastChild;h++;do if(1==
z.nodeType&&(z.nodeLastIndex=h++)&&e===z&&(h+g)%b)return 0;while(z=z.previousSibling);return 1},empty:function(e){return!!e.firstChild},parent:function(e){return!e.firstChild},"only-child":function(e){return 1!=e.parentNode.getElementsByTagName("*").length},checked:function(e){return!e.checked},lang:function(e,a){return e.lang!==a&&B.documentElement.lang!==a},enabled:function(e){return e.disabled||"hidden"===e.type},disabled:function(e){return!e.disabled},selected:function(e){return!e.selected}},
D={},u=function(e){return D[e]||(D[e]=new RegExp("(^| +)"+e+"($| +)"))},E={"":function(e,a){return null!==m(e,a)},"=":function(e,a,h){var g;return(g=m(e,a))&&g===h},"&=":function(e,a,h){var g;return(g=m(e,a))&&u(h).test(g)},"^=":function(e,a,h){var g;return(g=m(e,a)+"")&&!g.indexOf(h)},"$=":function(e,a,h){var g;return(g=m(e,a)+"")&&g.indexOf(h)==g.length-h.length},"*=":function(e,a,h){var g;return(g=m(e,a)+"")&&-1!=g.indexOf(h)},"|=":function(e,a,h){var g;return(g=m(e,a)+"")&&(g===h||!!g.indexOf(h+
"-"))},"!=":function(e,a,h){var g;return!(g=m(e,a))||!u(h).test(g)}},z=function(z,D){D=D||B;var t=[],u=null,m,s,y,q,A,F,G;if(h)try{t=Z(D.querySelectorAll(z.replace(b,'="$1"')))}catch(O){u=!0}if(!h||u)if(a.test(z))switch(u=0,z.charAt(0)){case "#":u=z.slice(1);t=B.getElementById(u);t.id!==u&&(t=B.all[u]);t=t?[t]:[];break;case ".":m=z.slice(1);if(e)t=Z((t=D.getElementsByClassName(m)).length?t:[]);else{m=" "+m+" ";s=D.getElementsByTagName("*");for(y=0;q=s[y++];)-1!=(" "+q.className+" ").indexOf(m)&&(t[u++]=
q);t=u?t:[]}break;case ":":s=D.getElementsByTagName("*");y=0;A=z.replace(I,"$1");for(F=z.replace(r,"");q=s[y++];)g[F]&&!g[F](q,A)&&(t[u++]=q);t=u?t:[];break;case "[":s=D.getElementsByTagName("*");y=0;q=v.exec(z);m=q[1];G=q[2]||"";for(A=q[3];q=s[y++];)E[G]&&(E[G](q,m,A)||"class"===m&&E[G](q,"className",A))&&(t[u++]=q);t=u?t:[];break;default:t=Z((t=D.getElementsByTagName(z)).length?t:[])}else{for(var J=z.split(c),K=J.length-1,Q=!!K,N,P,x,H,S,T,U,V,R,w,M,L;u=J[K--];){P=(N=u.replace(d,"$1%").replace(f,
"$1&").replace(l," $1 ").split(k)).length;y=0;H=" ";for(s=[D];x=N[y++];)if(" "!==x&&">"!==x&&"~"!==x&&"+"!==x&&s){x=x.match(n);S=x[1]||"*";T=x[2];U=x[3]?" "+x[3]+" ":"";m=x[4];G=x[5]||"";F=x[7];A="nth-child"===F||"nth-last-child"===F?p.exec("even"===x[8]&&"2n"||"odd"===x[8]&&"2n%1"||!C.test(x[8])&&"0n%"+x[8]||x[8]):x[8];V=[];u=R=0;for(M=y==P;w=s[R++];)switch(H){case " ":L=w.getElementsByTagName(S);for(w=0;q=L[w++];)T&&q.id!==T||U&&-1==(" "+q.className+" ").indexOf(U)||!(!m||E[G]&&(E[G](q,m,x[6])||
"class"===m&&E[G](q,"className",x[6])))||q.yeasss||(g[F]?g[F](q,A):F)||(M&&(q.yeasss=1),V[u++]=q);break;case "~":for(S=S.toLowerCase();(w=w.nextSibling)&&!w.yeasss;)1!=w.nodeType||"*"!==S&&w.nodeName.toLowerCase()!==S||T&&w.id!==T||U&&-1==(" "+w.className+" ").indexOf(U)||!(!m||E[G]&&(E[G](q,m,x[6])||"class"===m&&E[G](q,"className",x[6])))||w.yeasss||(g[F]?g[F](w,A):F)||(M&&(w.yeasss=1),V[u++]=w);break;case "+":for(;(w=w.nextSibling)&&1!=w.nodeType;);!w||w.nodeName.toLowerCase()!==S.toLowerCase()&&
"*"!==S||T&&w.id!==T||U&&-1==(" "+q.className+" ").indexOf(U)||!(!m||E[G]&&(E[G](q,m,x[6])||"class"===m&&E[G](q,"className",x[6])))||w.yeasss||(g[F]?g[F](w,A):F)||(M&&(w.yeasss=1),V[u++]=w);break;case ">":for(L=w.getElementsByTagName(S),y=0;q=L[y++];)q.parentNode!==w||T&&q.id!==T||U&&-1==(" "+q.className+" ").indexOf(U)||!(!m||E[G]&&(E[G](q,m,x[6])||"class"===m&&E[G](q,"className",x[6])))||q.yeasss||(g[F]?g[F](q,A):F)||(M&&(q.yeasss=1),V[u++]=q)}s=V}else H=x;if(Q){if(!s.concat){V=[];for(w=0;q=s[w];)V[w++]=
q;s=V}t=s.concat(1==t.length?t[0]:t)}else t=s}for(u=t.length;u--;)t[u].yeasss=t[u].nodeIndex=t[u].nodeIndexLast=null}return t};z.is=function(e,a){var h=z(a,e.parentNode),g,b;g=-1;for(b=h.length;++g<b;)if(h[g]===e)return!0;return!1};return z}(),N=function(a){if(a instanceof N)return a;if(!(this instanceof N))return new N(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,f=a.button;void 0===this.pageX&&
null!==a.clientX&&(d=this.target?this.target.ownerDocument||window.document:window.document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ba:aa;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};
v(N.prototype,{isDefaultPrevented:aa,isPropagationStopped:aa,isImmediatePropagationStopped:aa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ba;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ba;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ba;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();
this.stopPropagation()}},!0,!1);var ca=Array.prototype.indexOf;ca||(ca=Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),f=d.length>>>0;if(0===f)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=f)return-1;for(c=Math.max(0<=c?c:f-Math.abs(c),0);c<f;){if(c in d&&d[c]===a)return c;c++}return-1});var sa=function(){var a={select:function(a,c){for(var d,f,l=a.options,k=Z(c),n=l.length,p,C=-1;n--;)f=l[n],(p=k?-1!=ca.call(k,
f.value):!1)?(f.setAttribute("selected","selected"),d=f.selected=!0):f.removeAttribute("selected"),p||ga(m(f,"mjs-default-option"))||(C=n);d||(a.selectedIndex=C);return k}};a.radio=a.checkbox=function(a,c){if(Y(c)){var d;d=H(a);d=c?-1!=ca.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":1===L(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}(),ya=function(){var a=null;return function(){null===a&&(a=parseInt((/android (\d+)/i.exec(navigator.userAgent)||
[])[1],10)||!1);return a}}(),za=function(){var a;return function(){if(null===a){var b=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(b)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(b)||[])[1],10)||!1)}return a}}(),ta=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==za())return a[b]=!1;var c=window.document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),da=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);
if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),ea=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=da());var f=a[b];return void 0!==d?(f||(f=a[b]={}),f[c]=d):f?f[c]:void 0}}(),Aa=function(){var a=/(^|[^a-z0-9_$\]\)'"])(\.)([^0-9])/ig,b=Function,c=function(a,b){return function(c){var d=W.call(arguments),e;d.push(null);d.push(a);if(b){for(e=a.apply(null,d);(void 0===e||"number"==typeof e&&
isNaN(e))&&!c.$isRoot;)c=c.$parent,d[0]=c,e=a.apply(null,d);return e}return a.apply(null,d)}},d={},f=0,l={},k=0,n={},p=0,C=function(){1E3<=f&&(d={});1E3<=k&&(l={});1E3<=p&&(n={})};return{createGetter:function(n){try{return d[n]?d[n]:(f++,d[n]=c(new b("____","$$interceptor","$$itself","".concat("try {","return ",n.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(p){return K(p),R}},createSetter:function(d){try{if(!l[d]){k++;var n=d.replace(a,"$1____.$3");return l[d]=
c(new b("____","$$$$","$$interceptor","$$itself","".concat("try {",n," = $$$$",";} catch (thrownError) { return undefined; }")))}return l[d]}catch(p){return K(p),R}},createFunc:function(d){try{return n[d]?n[d]:(p++,n[d]=c(new b("____","$$interceptor","$$itself","".concat("try {",d.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(f){return K(f),R}},resetCache:C,enableResetCacheInterval:function(){setTimeout(C,1E4)}}}().createGetter,wa=/-./g,Ba=function(){return function(a){if(a.dataset)return a.dataset;
var b;if(void 0!==(b=ea(a,"data")))return b;b=a.attributes;var c={},d,f,l;d=0;for(f=b.length;d<f;d++)l=b[d].name,0===l.indexOf("data-")&&(c[va(l.substr(5))]=b[d].value);b=c;ea(a,"data",b);return b}}(),fa=function(a,b,c,d){var f=void 0,l=ea(a,"config"),k,n;if(!l){l={};if(f||null!==(f=m(a,"mjs-config")))for(k in a.removeAttribute("mjs-config"),f=f?Aa(f)({}):{},f)l[k]=f[k];f=Ba(a);for(k in f)n=f[k],l[k]=""===n?!0:n;ea(a,"config",l)}this.el=a;this.cb=b;this.scb=d;this.cbContext=c;this.inputType=b=l.type||
a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable="input"==a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};v(fa.prototype,{el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,d=this.el,f,l,k,n;f=0;for(l=b.length;f<l;f++)if("radio"==a)for(k=0,n=c.length;k<
n;k++)ja(c[k],b[f][0],b[f][1]);else ja(d,b[f][0],b[f][1]);for(f in this)this.hasOwnProperty(f)&&(this[f]=null)},initRadioInput:function(){var a=this.el,b,c;this.radio=a=M("input[name="+a.name+"]",a.ownerDocument);this.onRadioInputChangeDelegate=r(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate]);b=0;for(c=a.length;b<c;b++)y(a[b],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=r(this.onCheckboxInputChange,
this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);y(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,b=this,c=b.el,d=b.listeners,f;if(!ya()){var l=function(){a=!0},k=function(){a=!1;n()};d.push(["compositionstart",l]);d.push(["compositionend",k]);y(c,"compositionstart",l);y(c,"compositionend",k)}var n=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(ta("input"))d.push(["input",n]),y(c,"input",n);else{var p=function(a){f||
(f=window.setTimeout(function(){n(a);f=null},0))},l=function(a){a=a||window.event;var c=a.keyCode;if(13==c&&b.submittable&&b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||p(a)};d.push(["keydown",l]);y(c,"keydown",l);ta("paste")&&(d.push(["paste",p]),d.push(["cut",p]),y(c,"paste",p),y(c,"cut",p))}d.push(["change",n]);y(c,"change",n)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();
this.cb&&this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb&&this.cb.call(this.cbContext,a.checked?m(a,"value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;a=a.target||a.srcElement;this.cb&&this.cb.call(this.cbContext,a.value)},setValue:function(a){var b=this.inputType,c,d;if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++)b[c].checked=b[c].value==a;else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):sa(this.el,a)},getValue:function(){var a=
this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;return null}return"checkbox"==a?this.el.checked?m(this.el,"value")||!0:!1:this.processValue(H(this.el))}},!0,!1);fa.getValue=H;fa.setValue=sa;var X=function(){this.events={}};v(X.prototype,{createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new na(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var f=
this.events;f[a]||(f[a]=new na(a));return f[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,
W.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&
(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,f=a.length;++d<f;c=a[d],b[c]=r(this[c],this));this.api=b}return this.api}},!0,!1);var na=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=da();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=
0;this.returnResult=void 0===b?null:b};v(na.prototype,{getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,f=b||a;if(f[d]&&!c.allowDupes)return null;var l=++this.lid,k=c.first||!1;f[d]=l;a={fn:a,context:b,uniContext:f,id:l,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};k?this.listeners.unshift(a):this.listeners.push(a);this.map[l]=a;return l},once:function(a,
b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,f=this.listeners,l;l=a==parseInt(a)?a:(b||a)[d];if(!l)return!1;for(var k=0,n=f.length;k<n;k++)if(f[k].id==l){c=k;delete f[k].uniContext[d];break}if(-1==c)return!1;f.splice(c,1);delete this.map[l];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=s(a)?b[this.uni]:a;if(!d)return!1;for(var f=0,l=c.length;f<l;f++)if(c[f].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=
this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniContext[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=W.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b||"merge"==b?[]:null,d,f,a="first"==b?[a[0]]:
W.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start)))if(f=d.fn.apply(d.context,this._prepareArgs(d,arguments)),d.called++,d.called==d.limit&&this.un(d.id),"all"==b)c.push(f);else if("merge"==b&&f)c=c.concat(f);else{if("first"==b)return f;if("last"==b)c=f;else if(!1==b&&!1===f)return!1}if(b)return c}},!0,!1);var Ca=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),oa=function(){var a=[],b=!1,c="undefined"!=
typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var n=a.shift();c(function(){n[0].apply(n[1],n[2]);a.length?d():b=!1},0)},f=function(c,p,f){f=f||[];a.push([c,p,f]);b||d()},l=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},k=function(a,b){if(a instanceof k)return a;if(!(this instanceof k))return new k(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=P(a))a instanceof k?a.then(r(this.resolve,
this),r(this.reject,this)):(new k(c,a)).then(r(this.resolve,this),r(this.reject,this));else if(s(a))try{a.call(b,r(this.resolve,this),r(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};v(k.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=
this._rejects=this._fulfills=null},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=P(a)){a instanceof k?a.then(r(this._processResolveValue,this),r(this._processRejectReason,this)):(new k(c,a)).then(r(this._processResolveValue,this),r(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,
b;b=a.shift();)f(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)f(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;
this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new k,d=this._state;0==d||0!=this._wait?(a&&s(a)?this._fulfills.push([l(a,c),null]):this._fulfills.push([c.resolve,c]),b&&s(b)?this._rejects.push([l(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&s(a)?f(l(a,c),null,[this._value]):
c.resolve(this._value):2==d&&(b&&s(b)?f(l(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,this._value)}catch(c){K(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(d){K(d)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){K(c)}},
fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(d){K(d)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:r(this.then,this),done:r(this.done,this),fail:r(this.fail,this),always:r(this.always,this)}},after:function(a){var b=this;if(P(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};
s(a.done)?a.done(c):a.then(c)}return b}},!0,!1);k.fcall=function(a,b,c){return k.resolve(a.apply(b,c||[]))};k.resolve=function(a){var b=new k;b.resolve(a);return b};k.reject=function(a){var b=new k;b.reject(a);return b};k.all=function(a){if(!a.length)return k.resolve(null);var b=new k,c=a.length,d=Array(c),f=c,l,m,e=function(a,e){d[e]=a;f--;0==f&&b.resolve(d)};for(l=0;l<c;l++)(function(h){m=a[l];m instanceof k?m.done(function(a){e(a,h)}).fail(b.reject,b):P(m)||s(m)?(new k(m)).done(function(a){e(a,
h)}).fail(b.reject,b):e(m,h)})(l);return b};k.when=function(){return k.all(arguments)};k.allResolved=function(a){if(!a.length)return k.resolve(null);var b=new k,c=a.length,d=[],f=c,l,m,e=function(a){d.push(a);h()},h=function(){f--;0==f&&b.resolve(d)};for(l=0;l<c;l++)m=a[l],m instanceof k?m.done(e).fail(h):P(m)||s(m)?(new k(m)).done(e).fail(h):e(m);return b};k.race=function(a){if(!a.length)return k.resolve(null);var b=new k,c=a.length,d,f;for(d=0;d<c&&(f=a[d],f instanceof k?f.done(b.resolve,b).fail(b.reject,
b):P(f)||s(f)?(new k(f)).done(b.resolve,b).fail(b.reject,b):b.resolve(f),b.isPending());d++);return b};k.waterfall=function(a){if(!a.length)return k.resolve(null);for(var b=a.shift(),b=s(b)?k.fcall(b):k.resolve(c),c;c=a.shift();)P(c)?b=b.then(function(a){return function(){return a}}(c)):s(c)?b=b.then(c):b.resolve(c);return b};k.counter=function(a){var b=new k;b.countdown=function(){a--;0==a&&b.resolve()};return b};return k}(),Da=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
f=/^(?:GET|HEAD)$/i,l=function(a,e,b){var h,g;g=L(a);if(3>g&&-1<g&&b)e.push(encodeURIComponent(b)+"="+encodeURIComponent(""+a));else if(Y(a)&&b)for(h=0,g=a.length;h<g;h++)l(a[h],e,b+"["+h+"]");else if(la(a))for(h in a)a.hasOwnProperty(h)&&l(a[h],e,b?b+"["+h+"]":h)},k=function(e,h){e.replace(a,"");if(!1===h.cache){var g=(new Date).getTime();return b.test(e)?e.replace(b,"$1_="+g):e+(c.test(e)?"&":"?")+"_="+g}!h.data||window.FormData&&h.data instanceof window.FormData||(A(h.data)?g=h.data:(g=[],l(h.data,
g,null),g=g.join("&").replace(/%20/g,"+")),h.data=g,f.test(h.method)&&(e+=(c.test(e)?"&":"?")+h.data,h.data=null));return e},n={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},p={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,
transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},C={},I=new X,J=function(a){var e;e=eval;a&&(/^[^\S]*use strict/.test(a)?(e=document.createElement("script"),e.text=a,document.head.appendChild(e).parentNode.removeChild(e)):e(a))},H=function(a,e,b){var h,g;if(!la(a)&&!s(a)&&b)h=document.createElement("input"),h.setAttribute("type","hidden"),h.setAttribute("name",b),h.setAttribute("value",a),e.appendChild(h);
else if(Y(a)&&b)for(h=0,g=a.length;h<g;h++)H(a[h],e,b+"["+h+"]");else if(la(a))for(h in a)a.hasOwnProperty(h)&&H(a[h],e,b?b+"["+h+"]":h)},B=function(a){for(var e,b,h="",g=0;g<a.elements.length;g++)if(e=a.elements[g],null!==m(e,"name"))if(b="INPUT"===e.nodeName.toUpperCase()?m(e,"type").toUpperCase():"TEXT","FILE"===b)for(b=0;b<e.files.length;h+="&"+encodeURIComponent(e.name)+"="+encodeURIComponent(e.files[b++].name));else if("RADIO"!==b&&"CHECKBOX"!==b||e.checked)h+="&"+encodeURIComponent(e.name)+
"="+encodeURIComponent(e.value);return h},e=function(a,e,b){var h=e?e.dataType:null;e=e?e.selector:null;if(!A(a))return a;b=b||"";if("xml"===h||!h&&0<=b.indexOf("xml"))return a=ra(Q(a)),e?M(e,a):a;if("html"===h)return a=ra(a,"text/html"),e?M(e,a):a;if("fragment"==h){b=document.createDocumentFragment();h=document.createElement("div");for(h.innerHTML=a;h.firstChild;)b.appendChild(h.firstChild);return b}if("json"===h||!h&&0<=b.indexOf("json"))return Ca(Q(a));("script"===h||!h&&0<=b.indexOf("javascript"))&&
J(a);return a+""},h=function(a){var e=d.exec((window?window.location.href:"").toLowerCase())||[],b=d.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!b||b[1]===e[1]&&b[2]===e[2]&&(b[3]||("http:"===b[1]?"80":"443"))===(e[3]||("http:"===e[1]?"80":"443"))));e=new oa;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?
new FormData(a.form):B(a.form));a.url=k(a.url,a);b=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new E(a,e,this):new D(a,e,this):new u(a,e,this);this._deferred=e;this._transport=b;e.done(function(a){I.trigger("success",a)});e.fail(function(a){I.trigger("error",a)});e.always(function(){I.trigger("end")});I.trigger("start");a.timeout&&(this._timeout=setTimeout(r(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===I.trigger("beforeSend",a,b)&&(this._promise=oa.reject());
a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,b)&&(this._promise=oa.reject());this._promise||(qa(b.send,b),e.abort=r(this.abort,this),e.always(this.destroy,this),this._promise=e)};v(h.prototype,{_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=
document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);H(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,e=a.jsonpParam||"callback",b=a.jsonpCallback||"jsonp_"+da();a.url+=(c.test(a.url)?"&":"?")+e+"="+b;this._jsonpName=b;"undefined"!=typeof window&&(window[b]=r(this.jsonpCallback,this));"undefined"!=typeof global&&(global[b]=r(this.jsonpCallback,this));return b},jsonpCallback:function(a){var e;
try{e=this.processResponseData(a)}catch(b){this._deferred?this._deferred.reject(b):K(b)}this._deferred&&this._deferred.resolve(e)},processResponseData:function(a,b){var h=this._opt;a=e(a,h,b);I.hasListener("processResponse")&&(a=I.trigger("processResponse",a,this._deferred));h.processResponse&&(a=h.processResponse.call(h.callbackScope,a,this._deferred));return a},processResponse:function(a,e){var b=this._deferred,h;if(this._opt.jsonp)if(a){try{J(a)}catch(g){b.reject(g)}b.isPending()&&b.reject("jsonp script didn't invoke callback")}else b.reject("jsonp script is empty");
else{try{h=this.processResponseData(a,e)}catch(c){b.reject(c)}b.resolve(h)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();this._form=this._timeout=this._promise=this._deferred=this._opt=this._transport=null;this._jsonpName&&("undefined"!=typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}},!0,!1);var g=
function(a,e){e=e||{};a&&!A(a)?e=a:e.url=a;if(!e.url&&(e.form&&(e.url=m(e.form,"action")),!e.url))throw"Must provide url";v(e,C,!1,!0);v(e,p,!1,!0);e.method=e.method?e.method.toUpperCase():e.form?m(e.form,"method").toUpperCase()||"GET":"GET";return(new h(e)).promise()};g.setup=function(a){v(C,a,!0,!0)};g.on=function(){I.on.apply(I,arguments)};g.un=function(){I.un.apply(I,arguments)};g.get=function(a,e){e=e||{};e.method="GET";return g(a,e)};g.post=function(a,e){e=e||{};e.method="POST";return g(a,e)};
g.load=function(a,e,b){b=b||{};A(e)||(b=e);b.dataType="fragment";return g(e,b).done(function(e){if(b.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(e)})};g.loadScript=function(a){return g(a,{transport:"script"})};g.submit=function(a,e){e=e||{};e.form=a;return g(null,e)};var D=function(a,e,b){var h;if(!(window.XMLHttpRequest&&(h=new XMLHttpRequest)||(h=new ActiveXObject("Msxml2.XMLHTTP"))||(h=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=
h;this._deferred=e;this._opt=a;this._ajax=b;a.progress&&y(h,"progress",r(a.progress,a.callbackScope));a.uploadProgress&&h.upload&&y(h.upload,"progress",r(a.uploadProgress,a.callbackScope));h.onreadystatechange=r(this.onReadyStateChange,this)};v(D.prototype,{_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,e=this._xhr,b;if(a.xhrFields)for(b in a.xhrFields)e[b]=a.xhrFields[b];a.data&&a.contentType&&e.setRequestHeader("Content-Type",a.contentType);e.setRequestHeader("X-Requested-With",
"XMLHttpRequest");e.setRequestHeader("Accept",a.dataType&&n[a.dataType]?n[a.dataType]+", */*; q=0.01":n._default);for(b in a.headers)e.setRequestHeader(b,a.headers[b])},onReadyStateChange:function(){var a=this._xhr,e=this._deferred;if(0===a.readyState)a.onreadystatechange=R,e.resolve(a);else if(4===a.readyState){a.onreadystatechange=R;var b;a:{try{b=!a.status&&location&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(h){}b=!1}b?this._ajax.processResponse(A(a.responseText)?
a.responseText:void 0,a.getResponseHeader("content-type")||""):e.reject(a)}},abort:function(){this._xhr.onreadystatechange=R;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(e){this._deferred.reject(e)}},destroy:function(){this._ajax=this._opt=this._deferred=this._xhr=null}},!0,!1);var u=function(a,e,b){this._opt=a;this._ajax=b;this._deferred=e};v(u.prototype,{_opt:null,_deferred:null,_ajax:null,
_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);y(a,"load",r(this.onLoad,this));y(a,"error",r(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&
this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=this._el=null}},!0,!1);var E=function(a,e,b){this._opt=a;this._ajax=b;this._deferred=e};v(E.prototype,{_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),e="frame-"+da(),b=this._opt.form;a.setAttribute("id",e);a.setAttribute("name",e);a.style.display="none";document.body.appendChild(a);b.setAttribute("action",this._opt.url);b.setAttribute("target",e);y(a,"load",r(this.onLoad,
this));y(a,"error",r(this.onError,this));this._el=a;try{b.submit()}catch(h){this._deferred.reject(h)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);this._deferred=this._ajax=this._opt=
this._el=null}},!0,!1);return g}(),Ea=/^((https?|ftp):\/\/|)(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+;=]|:|@)|\/|\?)*)?$/i,
ua=function(){var a=0,b={},c=function(a,b){var g=0;switch(b.nodeName.toLowerCase()){case "select":return ka(b,function(a){a.selected&&g++}),g;case "input":if(/radio|checkbox/i.test(b.type))return ka(b.form,function(a){a.type==b.type&&a.name==b.name&&a.checked&&g++}),g}return a.length},d=function(a,b){if(!b)return void 0==a||""===a;switch(b.nodeName.toLowerCase()){case "select":var g=H(b);return!g||0==g.length;case "input":if(/radio|checkbox/i.test(b.type))return 0==c(a,b)}return 0==Q(a).length},f=
function(a,b){if(s(b))return a;Y(b)||(b=[b]);var g,c=b.length;for(g=-1;++g<c;a=a.replace(new RegExp("\\{"+g+"\\}","g"),b[g]));return a},l={};v(l,{required:function(a,b,g){return!1===g?!0:!d(a,b)},regexp:function(a,b,g){g=g instanceof RegExp?g:new RegExp(g);return d(a,b)||g.test(a)},notregexp:function(a,b,g){g=g instanceof RegExp?g:new RegExp(g);return d(a,b)||!g.test(a)},minlength:function(a,b,g){return d(a,b)||(b?c(Q(a),b)>=g:a.toString().length>=g)},maxlength:function(a,b,g){return d(a,b)||(b?c(Q(a),
b)<=g:a.toString().length<=g)},rangelength:function(a,b,g){var D=b?c(Q(a),b):a.toString().length;return d(a,b)||D>=g[0]&&D<=g[1]},min:function(a,b,g){return d(a,b)||parseInt(a,10)>=g},max:function(a,b,g){return d(a,b)||parseInt(a,10)<=g},range:function(a,b,g){a=parseInt(a,10);return d(a,b)||a>=g[0]&&a<=g[1]},email:function(a,b){return d(a,b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,b){return d(a,b)||Ea.test(a)},date:function(a,b){return d(a,b)||!/Invalid|NaN/.test(new Date(a))},dateiso:function(a,b){return d(a,b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return d(a,b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return d(a,b)||/^\d+$/.test(a)},creditcard:function(a,b){if(d(a,b))return!0;if(/[^0-9-]+/.test(a))return!1;var g=0,c=!1,f;a=a.replace(/\D/g,"");for(var l=a.length-1;0<=l;l--)f=a.charAt(l),f=parseInt(f,
10),c&&9<(f*=2)&&(f-=9),g+=f,c=!c;return 0==g%10},accept:function(a,b,g){g=A(g)?g.replace(/,/g,"|"):"png|jpe?g|gif";return d(a,b)||a.match(new RegExp(".("+g+")$","i"))},equalto:function(a,b,g,c){g=(b=c.getValidator().getField(g))?b.getElem():g;return a==H(g)},notequalto:function(a,b,g,c){g=(b=c.getValidator().getField(g))?b.getElem():g;return a!=H(g)},zxcvbn:function(a,b,g){return zxcvbn(a).score>=parseInt(g)}});var k={required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",
url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",rangelength:"Please enter a value between {0} and {1} characters long.",
range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}."},n={allowSubmit:!0,alwaysCheck:!1,alwaysDisplayState:!1,data:null,ignore:null,disabled:!1,cls:{valid:"",error:"",ajax:""},errorBox:{cls:"",fn:null,tag:"",position:"after",elem:null,enabled:!0},callback:{scope:null,destroy:null,statechange:null,errorchange:null,submit:null,check:null,beforeAjax:null,afterAjax:null,displaystate:null},rules:{},
messages:{}},p=function(a){if(!a)return{};var b=function(b,h,c){var d=a[b],f=!1;if(void 0!==d){switch(c){case "string":f=A(d);break;case "function":f=s(d);break;case "boolean":f=ia(d)}f&&(a[b]={},a[b][h]=d)}};b("errorBox","enabled","boolean");b("errorBox","tag","string");b("errorBox","fn","function");return a},C=function(a,b,g){b=b||{};var c,d;this._observable=new X;v(this,this._observable.getApi());this.cfg=c=v({},n,p(B.fieldDefaults),p(b),!0,!0);this.input=new fa(a,this.onInputChange,this,this.onInputSubmit);
this.elem=a;this.vldr=g;this.callbackScope=d=c.callback.scope;this.enabled=!a.disabled;this.id=m(a,"name")||m(a,"id");this.data=b.data;this.rules={};c.messages=v({},k,B.messages,c.messages,!0,!0);b=g.getVldId();a.setAttribute("data-validator",b);this.input.radio&&this.initRadio();for(var f in c.callback)if(c.callback[f])this.on(f,c.callback[f],d);c.rules&&this.setRules(c.rules,!1);this.readRules();this.prev=this.input.getValue();c.disabled&&this.disable()};v(C.prototype,{vldr:null,elem:null,rules:null,
cfg:null,callbackScope:null,input:null,enabled:!0,valid:null,dirty:!1,id:null,prev:"",error:null,errorRule:null,pending:null,rulesNum:0,displayState:!1,data:null,checking:!1,checkTmt:null,errorBox:null,customError:!1,getValidator:function(){return this.vldr},initRadio:function(){var a=this.input.radio,b=this.vldr.getVldId(),g,c;g=0;for(c=a.length;g<c;g++)a[g].setAttribute("data-validator",b)},setRules:function(a,b){b=void 0==b?!0:b;for(var g in a)this.setRule(g,a[g],!1);b?this.check(!1):this.setValidState(null);
return this},setRule:function(a,b,g){var c=this.rules;g=void 0==g?!0:g;null===b?(c[a]&&this.rulesNum--,delete c[a]):(c[a]||this.rulesNum++,c[a]=b,null!==this.valid&&this.setValidState(!1));g?this.check(!1):this.setValidState(null);return this},setMessage:function(a,b){this.cfg.messages[a]=b;return this},setMessages:function(a){for(var b in a)this.setMessage(b,a[b]);return this},getMessages:function(){return v({},this.cfg.messages)},readRules:function(){var a=this.elem,b=a.className,g={},c,d;for(d in l)l.hasOwnProperty(d)&&
(c=m(a,d)||m(a,"data-validate-"+d),void 0!=c&&!1!==c&&("minlength"!=d&&"maxlength"!=d||-1!=parseInt(c,10))&&(g[d]=c,(c=m(a,"data-message-"+d))&&this.setMessage(d,c)));if(c=m(a,"remote"))g.remote=c;if(b)for(b=b.split(" "),d=0,c=b.length;d<c;d++)if(a=Q(b[d]),l[a]||"remote"==a)g[a]=!0;for(d in g)this.setRule(d,g[d],!1)},getRules:function(){return this.rules},hasRule:function(a){return this.rules[a]?!0:!1},getValue:function(){return this.input.getValue()},getUserData:function(){return this.data},setUserData:function(a){var b=
this.data;this.data=a;return b},isEmpty:function(){return d(this.getValue(),this.elem)},enable:function(){this.enabled=!0;this.vldr.reset();return this},disable:function(){this.enabled=!1;!1===this.valid&&(this.setValidState(!0),this.doDisplayState());return this},enableDisplayState:function(){this.displayState=!0},disableDisplayState:function(){this.displayState=!1},isDisplayStateEnabled:function(){return this.displayState},toggleErrorBox:function(a){var b=this.cfg,g=b.errorBox.enabled;b.errorBox.enabled=
a;!g&&a&&a.displayState&&!1===this.valid()&&this.doDisplayState()},isEnabled:function(){return this.enabled},getElem:function(){return this.elem},getName:function(){return this.id},getError:function(){return this.error},getErrorRule:function(){return this.errorRule},isValid:function(){return this.isEnabled()?this.customError?!1:!0===this.valid&&!this.pending||0===this.rulesNum:!0},getExactValidState:function(){return this.valid},setCustomError:function(a,b){this.customError=a?!0:!1;this.setValidState(a?
!1:!0);this.setError(!0===a?null:a,b);this.doDisplayState()},reset:function(){this.abort();this.dirty=!1;this.prev="";this.setValidState(null);this.setError(null);this.doDisplayState();return this},abort:function(){this.pending&&(this.pending.abort(),this.pending=null);return this},check:function(a){var b=this.rules,g=this.cfg,c=this.elem;if(!this.isEnabled())return!0;if(this.customError)return!1;if(0==this.rulesNum&&!1!==this.valid)return!0;if(this.checking)return this.checkTmt||(this.checkTmt=setTimeout(r(this.checkTimeout,
this),100)),!0===this.valid;this.checking=!0;if(!(!0===a||b.equalTo||b.notEqualTo||this.dirty||null===this.valid||g.alwaysCheck))return this.pending||this.doDisplayState(),this.checking=!1,!0===this.valid;var d=!0,k=!1,m=this.getValue(),n,p;for(p in b)if("remote"==p){if(this.dirty||g.alwaysCheck||null===this.valid||!0===a)if(m||b[p].checkEmpty)k=!0}else if(!0!==(n=(s(b[p])?b[p]:l[p]).call(this.callbackScope,m,c,b[p],this))){d=!1;this.setError(f(n||g.messages[p]||"",b[p]),p);break}k=k&&d;d&&this.setError(null);
k?this.ajaxCheck():(this.setValidState(d),this.doDisplayState());this.checking=this.dirty=!1;this.trigger("check",this,this.valid);return!0===this.valid&&!k},doDisplayState:function(){var a=this.cfg,b=this.isValid(),g=a.cls.error,c=a.cls.valid,d=this.elem;this.displayState||a.alwaysDisplayState||(b=null);null===this.valid&&(b=null);g&&(!1===b?J(d,g):O(d,g));c&&(!0===b?J(d,c):O(d,c));g=this.getErrorBox();c=this.error;g&&(!1===b&&c&&(g.innerHTML=state.error),g.style.display=!1===b&&c&&a.errorBox.enabled?
"block":"none");this.trigger("displaystate",this,b,this.error)},getErrorBox:function(){var a=this.cfg.errorBox;return a.tag||a.fn||a.selector?(!this.errorBox&&a.enabled&&this.createErrorBox(),this.errorBox):null},destroy:function(){this.trigger("destroy",this);this.elem.removeAttribute("data-validator");this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox);this.input.destroy();this.input=null;this._observable.destroy();this.elem=this.rules=this.errorBox=this.cfg=this.vldr=this._observable=
null},isPending:function(){return null!==this.pending},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("statechange",this,a))},setError:function(a,b){if(this.error!=a||this.errorRule!=b)this.error=a,this.errorRule=b,this.trigger("errorchange",this,a,b)},checkTimeout:function(){this.checkTmt=null;this.checking||this.check(!1)},onInputChange:function(a){this.prev!==a&&(this.dirty=!0,this.customError=!1,this.abort(),this.pending||this.check(!1),this.prev=this.input.getValue())},
onInputSubmit:function(a){a=new N(a);if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||!1!==this.trigger("submit",this,a)))return a.preventDefault(),!1},createErrorBox:function(){var a=this.cfg.errorBox,b=a.tag,c=a.cls,d=a.fn,f=a.position,a=a.elem;d?this.errorBox=d.call(this.callbackScope,this):a?this.errorBox=a:(this.errorBox=window.document.createElement(b),this.errorBox.className=c,b=(b=this.input.radio)?b[b-1]:this.elem,"appendParent"==f?b.parentNode.appendChild(this.errorBox):"before"==f?b.parentNode.insertBefore(this.errorBox,
b):b.parentNode.insertBefore(this.errorBox,b.nextSibling))},ajaxCheck:function(){var a=this.elem,b=this.rules.remote,c=this.getValue(),d=this.cfg,b=v({},A(b)?{url:b}:b,!0);b.data=b.data||{};b.data[b.paramName||m(a,"name")||m(a,"id")]=c;b.handler||(b.dataType="text");b.cache=!1;d.cls.ajax&&J(a,d.cls.ajax);this.trigger("beforeAjax",this,b);this.pending=Da(b);this.pending.done(r(this.onAjaxSuccess,this));this.pending.fail(r(this.onAjaxError,this))},onAjaxSuccess:function(a){var b=this.rules,c=this.cfg;
this.pending=null;var d=!0;b.remote.handler?(a=b.remote.handler.call(this.callbackScope,this,a),!0!==a&&(this.setError(f(a||c.messages.remote||"",b.remote),"remote"),d=!1)):a?(this.setError(a,"remote"),d=!1):this.setError(null);c.cls.ajax&&O(this.elem,c.cls.ajax);this.setValidState(d);this.doDisplayState();this.trigger("afterAjax",this)},onAjaxError:function(a,b){var c=this.cfg;c.cls.ajax&&O(this.elem,c.cls.ajax);this.pending=null;"abort"!=b&&"abort"!=a&&(this.setValidState(!1),this.doDisplayState(),
this.trigger("afterAjax",this))}},!0,!1);var I={alwaysCheck:!1,alwaysDisplayState:!1,disabled:!1,value:null,elem:null,errorBox:null,errorField:null,data:null,cls:{valid:"",error:""},fields:[],rules:{},messages:{},callback:{scope:null,destroy:null,statechange:null,errorchange:null,displaystate:null}},K=function(a,b){a=a||{};var c,d;this._observable=new X;this._vldr=b;v(this,this._observable.getApi());this.cfg=c=v({},I,B.groupDefaults,a,!0,!0);this.callbackScope=d=c.callback.scope;this.data=a.data;
this.el=a.elem;this.fields={};this.rules={};c.messages=v({},k,B.messages,c.messages,!0,!0);var f;if(c.callback)for(f in c.callback)if(c.callback[f])this.on(f,c.callback[f],d);c.rules&&this.setRules(c.rules,!1);if(c.fields)for(f=0,d=a.fields.length;f<d;f++)this.add(b.getField(c.fields[f]));this.enabled=!c.disabled};v(K.prototype,{fields:null,rules:null,cfg:null,callbackScope:null,vldr:null,enabled:!1,invalid:null,valid:null,displayState:!1,rulesNum:0,error:null,data:null,errorBox:null,el:null,enable:function(){this.enabled=
!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},isValid:function(){return!this.enabled||0===this.invalid&&!0===this.valid},getExactValidState:function(){return this.valid},reset:function(){this.invalid=0;this.setValidState(null);this.setError(null);this.doDisplayState();return this},getUserData:function(){return this.data},getName:function(){return this.cfg.name},setRules:function(a,b){b=void 0==b?!0:b;for(var c in a)this.setRule(c,a[c],!1);
b?this.check():this.setValidState(null);return this},setRule:function(a,b,c){var d=this.rules;c=void 0==c?!0:c;null===b?(d[a]&&this.rulesNum--,delete d[a]):(d[a]||this.rulesNum++,d[a]=b,null!==this.valid&&this.setValidState(!1));c?this.check():this.setValidState(null);return this},getRules:function(){return v({},this.rules)},hasRule:function(a){return this.rules[a]?!0:!1},setError:function(a){var b=this.cfg;this.error!=a&&(b.errorField?(this.vldr.getField(b.errorField).setError(a),this.error=null):
(this.error=a,this.trigger("errorchange",this,a)))},getError:function(){return this.error},getFields:function(){return this.fields},enableDisplayState:function(){this.displayState=!0;return this},disableDisplayState:function(){this.displayState=!1;return this},check:function(){var a=this.cfg,b=this.fields,c=this.rules;if(!this.enabled||0==this.rulesNum)return this.setValidState(null),this.doDisplayState(),!0;this.countInvalid();if(0<this.invalid)return this.setValidState(null),this.doDisplayState(),
!0;var d={},k=!0,m=null,n;if(a.value){for(n in b)d[n]=b[n].getValue();m=a.value.call(this.callbackScope,d,this)}for(n in c)if(!0!==(b=(s(c[n])?c[n]:l[n]).call(this.callbackScope,m,null,c[n],this,d))){k=!1;b||a.messages[n]?this.setError(f(b||a.messages[n]||"",c[n])):this.setError(null);break}k&&this.setError(null);this.setValidState(k);this.doDisplayState();return!0===this.valid},doDisplayState:function(){var a=this.valid,b=this.cfg;this.displayState||b.alwaysDisplayState||(a=null);if(b.errorBox){var c=
this.getErrorBox();null!==a?c&&(c.innerHTML=this.error||"",c.style.display=!1===this.valid?"block":"none"):c&&(c.style.display="none")}c=b.cls.error;b=b.cls.valid;a=this.valid;c&&(!1===a?J(this.el,c):O(this.el,c));b&&(!0===a?J(this.el,b):O(this.el,b));this.trigger("displaystate",this,this.valid)},getErrorBox:function(){var a=this.cfg,b=this.fields,c=a.errorBox;if(b[c])return b[c].getErrorBox();this.errorBox||(s(a.errorBox)?this.errorBox=a.errorBox.call(this.callbackScope,this):this.errorBox=a.errorBox);
return this.errorBox},destroy:function(){var a=this.fields,b;for(b in a)a[b]&&this.setFieldEvents(a[b],"un");this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox);this._observable.destroy();this.cfg=this.fields=this.rules=this.vldr=this._observable=null},add:function(a){var b=this.fields,c=a.getName();b[c]||(b[c]=a,this.setFieldEvents(a,"on"))},setFieldEvents:function(a,b){a[b]("statechange",this.onFieldStateChange,this)},remove:function(a){var b=this.fields,c=a.getName();b[c]&&(delete b[c],
this.setFieldEvents(a,"un"));return this},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("statechange",this,a))},countInvalid:function(){var a=this.fields;this.invalid=0;for(var b in a)this.invalid+=a[b].isValid()?0:1},onFieldStateChange:function(a,b){this.trigger("fieldstatechange",this,a,b);this.check()}},!0,!1);var L={form:null,all:{},fields:{},rules:{},cls:{valid:"",error:"",checking:""},groups:{},callback:{scope:null,destroy:null,reset:null,beforesubmit:null,submit:null,
statechange:null,check:null,displaystate:null,displaystatechange:null}},B=function(c,d,g){var f=c.nodeName.toLowerCase();this.vldId=++a;b[this.vldId]=this;c.setAttribute("data-validator",this.vldId);this.el=c;d&&!A(d)&&(g=d,d=null);this._observable=new X;this.cfg=c=v({},L,B.defaults,B[d],g,!0,!0);this.callbackScope=d=c.callback.scope;this.isForm="form"==f;this.isField=/input|select|textarea/.test(f);this.fields={};this.groups={};v(this,this._observable.getApi());this._observable.createEvent("submit",
!1);this._observable.createEvent("beforesubmit",!1);this.onRealSubmitClickDelegate=r(this.onRealSubmitClick,this);this.resetDelegate=r(this.reset,this);this.onSubmitClickDelegate=r(this.onSubmitClick,this);this.onFormSubmitDelegate=r(this.onFormSubmit,this);delete c.callback.scope;var k,l;for(l in c.callback)this.on(l,c.callback[l],d);this.initFields();f=this.fields;for(k in c.rules)f[k]&&f[k].setRules(c.rules[k],!1);c.rules=null;for(k in c.groups)this.addGroup(k,c.groups[k]);this.initForm("bind");
delete c.rules;delete c.fields;delete c.groups;this.enabled=!0};v(B.prototype,{vldId:null,el:null,cfg:null,enabled:!1,invalid:null,pending:0,grps:0,outside:!0,submitted:!1,displayState:!1,isForm:!1,isField:!1,submitButton:null,hidden:null,callbackScope:null,preventFormSubmit:!1,_observable:null,fields:null,groups:null,getVldId:function(){return this.vldId},getElem:function(){return this.el},getGroup:function(a){return this.groups[a]||null},getField:function(a){return this.fields[a]||null},enable:function(){this.enabled=
!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},enableDisplayState:function(){var a=this.fields,b=this.groups,c;if(!0!==this.displayState){this.displayState=!0;for(c in a)a[c].enableDisplayState();for(c in b)b[c].enableDisplayState();this.trigger("displaystatechange",this,!0)}return this},disableDisplayState:function(){var a=this.groups,b=this.fields,c;if(!1!==this.displayState){this.displayState=!1;for(c in b)b[c].disableDisplayState();for(c in a)a[c].disableDisplayState();
this.trigger("displaystatechange",this,!1)}return this},isDisplayStateEnabled:function(){return this.displayState},isValid:function(){return!1===this.enabled?!0:0===this.invalid&&0===this.pending&&0===this.grps&&!0===this.outside},getErrors:function(a){var b=!0==a?[]:{},c,d,f,k=[this.fields,this.groups],l;if(!this.isEnabled())return b;for(f=0;2>f;f++)for(d in l=k[f],l)null===l[d].getExactValidState()&&l[d].check(),l[d].isValid()||(c=l[d].getError())&&(a?b.push(c):b[d]=c);return b},check:function(){var a=
this.fields,b=this.groups;if(!this.isEnabled())return!0;var c=this.isValid(),d;for(d in a)a[d].check();for(d in b)b[d].check();this.outside=!1!==this.trigger("check",this);a=this.isValid();c!=a&&(this.doDisplayState(),this.trigger("statechange",this,!1));return a},add:function(a,b){var c=a.nodeName.toLowerCase(),d=a.type;if("input"!=c&&"textarea"!=c&&"select"!=c||"submit"==d||"reset"==d||"button"==d||null!==m(a,"data-no-validate")||null!==m(a,"data-validator"))return this;var d=m(a,"name")||m(a,"id"),
f=this.cfg,c=this.fields;if(!d)return this;d=f.fields&&f.fields[d]?f.fields[d]:b||{};A(d)&&(d={rules:[d]});d=v({},f.all||{},d,!0,!0);if(d.ignore)return this;d.callback||(d.callback={scope:this.callbackScope});f=new C(a,d,this);d=f.getName();if(c[d])return this;c[d]=f;this.setFieldEvents(f,"on");this.displayState&&f.enableDisplayState();this.isEnabled()&&null!==this.invalid&&f.check();return this},addGroup:function(a,b){var c=this.groups;c[a]||(b.name=a,c[a]=new K(b,this),this.setGroupEvents(c[a],
"on"),this.isEnabled()&&null!==this.invalid&&c[a].check())},focusInvalid:function(){var a=this.fields,b;for(b in a)if(!a[b].isValid()){a[b].getElem().focus();break}},reset:function(){var a=this.fields,b=this.groups,c;this.submitted=!1;this.disableDisplayState();for(c in b)b[c].reset();for(c in a)a[c].reset();this.pending=0;this.invalid=null;this.grps=0;this.outside=!1;this.doDisplayState();this.trigger("reset",this);return this},submit:function(){var a=this.el;if(this.isForm)if(s(a.submit))!1!==this.trigger("beforesubmit",
this)&&!1!==this.trigger("submit",this)&&a.submit();else this.onSubmit();else this.onSubmit()},setFieldEvents:function(a,b){a[b]("statechange",this.onFieldStateChange,this);a[b]("beforeAjax",this.onBeforeAjax,this);a[b]("afterAjax",this.onAfterAjax,this);a[b]("submit",this.onFieldSubmit,this);a[b]("destroy",this.onFieldDestroy,this)},setGroupEvents:function(a,b){a[b]("statechange",this.onGroupStateChange,this)},initFields:function(){var a=this.el,b,c;if(this.isField)return this.add(a),this;a=M("input, textarea, select",
a);b=-1;for(c=a.length;++b<c;this.add(a[b]));return this},initForm:function(a){var b=this.el,c=b.getElementsByTagName("input"),d=M(".submit",b),f=M(".reset",b);a="bind"==a?y:ja;var k,l,m,n;k=0;for(l=c.length;k<l;k++)n=c[k],m=n.type,"submit"==m?a(n,"click",this.onRealSubmitClickDelegate):"reset"==m&&a(n,"click",this.resetDelegate);k=-1;for(l=d.length;++k<l;"submit"!=d[k].type&&a(d[k],"click",this.onSubmitClickDelegate));k=-1;for(l=f.length;++k<l;"reset"!=f[k].type&&a(f[k],"click",this.resetDelegate));
this.isForm&&a(b,"submit",this.onFormSubmitDelegate)},onRealSubmitClick:function(a){a=new N(a||window.event);this.submitButton=a.target||a.srcElement;this.preventFormSubmit=!1;return this.onSubmit(a)},onSubmitClick:function(a){this.preventFormSubmit=!1;return this.onSubmit(new N(a||window.event))},onFormSubmit:function(a){a=new N(a);if(!this.isValid()||this.preventFormSubmit)return a.preventDefault(),!1},onFieldSubmit:function(a,b){this.preventFormSubmit=!1;this.enableDisplayState();this.submitted=
!0;return this.onSubmit(b)},onSubmit:function(a){this.enableDisplayState();if(this.pending)return a&&a.preventDefault(),!1;var b=this.submitButton?!0:!1;this.isForm&&(this.hidden&&(this.el.removeChild(this.hidden),this.hidden=null),this.submitButton&&/input|button/.test(this.submitButton.nodeName)&&(this.hidden=window.document.createElement("input"),this.hidden.type="hidden",this.hidden.setAttribute("name",this.submitButton.name),this.hidden.value=this.submitButton.value,this.el.appendChild(this.hidden)));
this.submitButton=null;if(!this.isValid()&&(this.check(),this.onFieldStateChange(),this.pending))return a&&a.preventDefault(),!1;if(!1===this.trigger("beforesubmit",this)||!this.isValid())return a&&(a.preventDefault(),a.stopPropagation()),this.pending||(this.focusInvalid(),this.submitted=!1),this.trigger("failedsubmit",this,b),!1;this.pending||(this.submitted=!1);a=this.trigger("submit",this);this.preventFormSubmit=!a;return a},onFieldDestroy:function(a){a=a.getElem();a=m(a,"name")||m(a,"id");delete this.fields[a]},
onFieldStateChange:function(a,b){var c=this.invalid,d=this.fields;this.invalid=0;for(var f in d)this.invalid+=d[f].isValid()?0:1;a&&this.trigger("fieldstatechange",this,a,b);if(null===c||null!==c&&this.invalid!==c)this.doDisplayState(),this.trigger("statechange",this,this.isValid())},onGroupStateChange:function(){var a=this.groups,b=this.grps;this.grps=0;for(var c in a)this.grps+=a[c].isValid()?0:1;if(null===b||null!==b&&this.grps!==b)this.doDisplayState(),this.trigger("statechange",this,this.isValid())},
doDisplayState:function(){var a=this.cfg,b=this.isValid(),c=a.cls.error,a=a.cls.valid,d=this.el;if(this.isField||!this.displayState)b=null;null===this.invalid&&(b=null);c&&(!1===b?J(d,c):O(d,c));a&&(!0===b?J(d,a):O(d,a));this.trigger("displaystate",this,b)},onBeforeAjax:function(){this.pending++;this.cfg.cls.ajax&&J(this.el,this.cfg.cls.ajax)},onAfterAjax:function(){var a=this.fields,b=this.cfg;this.pending=0;for(var c in a)this.pending+=a[c].isPending()?1:0;this.doDisplayState();b.cls.ajax&&O(this.el,
b.cls.ajax);this.submitted&&0==this.pending&&(this.submitted=!1,this.isValid()?this.submit():this.focusInvalid())},destroy:function(){var a=this.groups,c=this.fields,d;this.reset();this.trigger("destroy",this);delete b[this.vldId];for(d in a)a.hasOwnProperty(d)&&a[d]&&(this.setGroupEvents(a[d],"un"),a[d].destroy());for(d in c)c.hasOwnProperty(d)&&c[d]&&(this.setFieldEvents(c[d],"un"),c[d].destroy());this._observable.destroy();this._observable=null;this.initForm("unbind");this.cfg=this.el=this.groups=
this.fields=null}},!0,!1);B.defaults={};B.messages={};B.fieldDefaults={};B.groupDefaults={};B.addMethod=function(a,b,c){l[a]||(l[a]=b,c&&(B.messages[a]=c))};B.getValidator=function(a){a=m(a,"data-validator");return b[a]||null};return B}();window.jQuery&&(jQuery.fn.metaphorjsValidator=function(a,b,c){var d="metaphorjsValidator",f;"string"==typeof a&&"destroy"!=a&&(f=a,a=b,b=c);b=b||"default";a=a||{};d+="-"+b;this.each(function(){var c=$(this),k=c.data(d);if("destroy"==a)k&&(k.destroy(),c.data(d,null));
else{if(k)throw Error("MetaphorJs validator is already instantiated for this html element");a.form=c;a.instanceName=b;c.data(d,new ua(f,a))}})});ma.Validator=ua;"undefined"!=typeof global?global.MetaphorJs=ma:window.MetaphorJs=ma})();
