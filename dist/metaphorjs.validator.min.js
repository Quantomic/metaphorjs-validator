(function(){var ca={lib:{},cmp:{},view:{}},da=function(l){return null===l},ra=Object.prototype.toString,F=function(){var l={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(a){if(!a){if(null===a)return 6;if(void 0===a)return 7}var b=l[ra.call(a)];if(void 0===b)return-1;1==b&&isNaN(a)&&(b=8);return b}}(),n=function(l){return 0===F(l)},N=function(){return String.prototype.trim?
function(l){return n(l)?l.trim():l}:function(l){return n(l)?l.replace(/^\s\s*/,"").replace(/\s\s*$/,""):l}}(),H=function(){var l=/\r/,a={option:function(a){var c=a.getAttribute("value")||a.value;return void 0!=c?c:N(a.innerText||a.textContent)},select:function(a){for(var c,d=a.options,g=a.selectedIndex,k=(a="select-one"===a.type||0>g)?null:[],h=a?g+1:d.length,s,z=0>g?h:a?g:0;z<h;z++)if(c=d[z],s=c.disabled||c.parentNode.disabled,(c.selected||z===g)&&!s){c=H(c);if(a)return c;k.push(c)}return k},radio:function(a){return da(a.getAttribute("value"))?
"on":a.value},checkbox:function(a){return da(a.getAttribute("value"))?"on":a.value}};return function(b){var c,d;if((c=a[b.type]||a[b.nodeName.toLowerCase()])&&void 0!==(d=c(b,"value")))return d;d=b.value;return n(d)?d.replace(l,""):null==d?"":d}}(),V=Array.prototype.slice,w=function a(){var b=!1,c=!1,d=V.call(arguments),g=d.shift(),k,h,s;2===F(d[d.length-1])&&(b=d.pop());2===F(d[d.length-1])&&(c=b,b=d.pop());for(;d.length;)if(k=d.shift())for(h in k)if(k.hasOwnProperty(h)&&void 0!==(s=k[h]))if(c)if(g[h]&&
3===F(g[h])&&3===F(s))a(g[h],s,b,c);else{if(!0===b||void 0==g[h])3===F(s)?(g[h]={},a(g[h],s,b,!0)):g[h]=s}else if(!0===b||void 0==g[h])g[h]=s;return g},l=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},D=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},ea=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},la=function(){var a={};return function(b){return a[b]||(a[b]=
new RegExp(b))}}(),I=function(a,b){var c;if(c=b)c=!(b&&la("(?:^|\\s)"+b+"(?!\\S)").test(a.className));c&&(a.className+=" "+b)},J=function(a,b){b&&(a.className=a.className.replace(la("(?:^|\\s)"+b+"(?!\\S)"),""))},W=function(a){if(a&&void 0!=!a.length&&!n(a)){for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b}return a?[a]:[]},L=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,g=/(\[[^\]]+)~/,k=/(~|>|\+)/,h=/ +/,s=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
z=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,sa=/\D/,l=/[^(]*\(([^)]*)\)/,G=/\(.*/,A=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,x=document,f=!!x.getElementsByClassName,e=!!x.querySelectorAll,p={"first-child":function(f){return f.parentNode.getElementsByTagName("*")[0]!==f},"last-child":function(f){for(;(f=f.nextSibling)&&1!=f.nodeType;);return!!f},root:function(f){return"html"!==f.nodeName.toLowerCase()},"nth-child":function(f,a){var e=f.nodeIndex||0,p=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(e)return!((e+
p)%b);var c=f.parentNode.firstChild;e++;do if(1==c.nodeType&&(c.nodeIndex=++e)&&f===c&&(e+p)%b)return 0;while(c=c.nextSibling);return 1},"nth-last-child":function(f,a){var e=f.nodeIndexLast||0,p=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(e)return!((e+p)%b);var c=f.parentNode.lastChild;e++;do if(1==c.nodeType&&(c.nodeLastIndex=e++)&&f===c&&(e+p)%b)return 0;while(c=c.previousSibling);return 1},empty:function(f){return!!f.firstChild},parent:function(f){return!f.firstChild},"only-child":function(f){return 1!=
f.parentNode.getElementsByTagName("*").length},checked:function(f){return!f.checked},lang:function(f,a){return f.lang!==a&&x.documentElement.lang!==a},enabled:function(f){return f.disabled||"hidden"===f.type},disabled:function(f){return!f.disabled},selected:function(f){return!f.selected}},m={},q=function(f){return m[f]||(m[f]=new RegExp("(^| +)"+f+"($| +)"))},B={"":function(f,a){return!!f.getAttribute(a)},"=":function(f,a,e){return(a=f.getAttribute(a))&&a===e},"&=":function(f,a,e){return(a=f.getAttribute(a))&&
q(e).test(a)},"^=":function(f,a,e){return(a=f.getAttribute(a)+"")&&!a.indexOf(e)},"$=":function(f,a,e){return(a=f.getAttribute(a)+"")&&a.indexOf(e)==a.length-e.length},"*=":function(f,a,e){return(a=f.getAttribute(a)+"")&&-1!=a.indexOf(e)},"|=":function(f,a,e){return(a=f.getAttribute(a)+"")&&(a===e||!!a.indexOf(e+"-"))},"!=":function(f,a,e){return!(a=f.getAttribute(a))||!q(e).test(a)}},t=function(O,Q){Q=Q||x;var m=[],y=null,q,t,n,r,w,C,E;if(e)try{m=W(Q.querySelectorAll(O.replace(b,'="$1"')))}catch(D){y=
!0}if(!e||y)if(a.test(O))switch(y=0,O.charAt(0)){case "#":y=O.slice(1);m=x.getElementById(y);m.id!==y&&(m=x.all[y]);m=m?[m]:[];break;case ".":q=O.slice(1);if(f)m=W((m=Q.getElementsByClassName(q)).length?m:[]);else{q=" "+q+" ";t=Q.getElementsByTagName("*");for(n=0;r=t[n++];)-1!=(" "+r.className+" ").indexOf(q)&&(m[y++]=r);m=y?m:[]}break;case ":":t=Q.getElementsByTagName("*");n=0;w=O.replace(l,"$1");for(C=O.replace(G,"");r=t[n++];)p[C]&&!p[C](r,w)&&(m[y++]=r);m=y?m:[];break;case "[":t=Q.getElementsByTagName("*");
n=0;r=A.exec(O);q=r[1];E=r[2]||"";for(w=r[3];r=t[n++];)B[E]&&(B[E](r,q,w)||"class"===q&&B[E](r,"className",w))&&(m[y++]=r);m=y?m:[];break;default:m=W((m=Q.getElementsByTagName(O)).length?m:[])}else{for(var F=O.split(c),J=F.length-1,N=!!J,I,M,v,H,R,S,T,U,K,u,L,P;y=F[J--];){M=(I=y.replace(d,"$1%").replace(g,"$1&").replace(k," $1 ").split(h)).length;n=0;H=" ";for(t=[Q];v=I[n++];)if(" "!==v&&">"!==v&&"~"!==v&&"+"!==v&&t){v=v.match(s);R=v[1]||"*";S=v[2];T=v[3]?" "+v[3]+" ":"";q=v[4];E=v[5]||"";C=v[7];
w="nth-child"===C||"nth-last-child"===C?z.exec("even"===v[8]&&"2n"||"odd"===v[8]&&"2n%1"||!sa.test(v[8])&&"0n%"+v[8]||v[8]):v[8];U=[];y=K=0;for(L=n==M;u=t[K++];)switch(H){case " ":P=u.getElementsByTagName(R);for(u=0;r=P[u++];)S&&r.id!==S||T&&-1==(" "+r.className+" ").indexOf(T)||!(!q||B[E]&&(B[E](r,q,v[6])||"class"===q&&B[E](r,"className",v[6])))||r.yeasss||(p[C]?p[C](r,w):C)||(L&&(r.yeasss=1),U[y++]=r);break;case "~":for(R=R.toLowerCase();(u=u.nextSibling)&&!u.yeasss;)1!=u.nodeType||"*"!==R&&u.nodeName.toLowerCase()!==
R||S&&u.id!==S||T&&-1==(" "+u.className+" ").indexOf(T)||!(!q||B[E]&&(B[E](r,q,v[6])||"class"===q&&B[E](r,"className",v[6])))||u.yeasss||(p[C]?p[C](u,w):C)||(L&&(u.yeasss=1),U[y++]=u);break;case "+":for(;(u=u.nextSibling)&&1!=u.nodeType;);!u||u.nodeName.toLowerCase()!==R.toLowerCase()&&"*"!==R||S&&u.id!==S||T&&-1==(" "+r.className+" ").indexOf(T)||!(!q||B[E]&&(B[E](r,q,v[6])||"class"===q&&B[E](r,"className",v[6])))||u.yeasss||(p[C]?p[C](u,w):C)||(L&&(u.yeasss=1),U[y++]=u);break;case ">":for(P=u.getElementsByTagName(R),
n=0;r=P[n++];)r.parentNode!==u||S&&r.id!==S||T&&-1==(" "+r.className+" ").indexOf(T)||!(!q||B[E]&&(B[E](r,q,v[6])||"class"===q&&B[E](r,"className",v[6])))||r.yeasss||(p[C]?p[C](r,w):C)||(L&&(r.yeasss=1),U[y++]=r)}t=U}else H=v;if(N){if(!t.concat){U=[];for(u=0;r=t[u];)U[u++]=r;t=U}m=t.concat(1==m.length?m[0]:m)}else m=t}for(y=m.length;y--;)m[y].yeasss=m[y].nodeIndex=m[y].nodeIndexLast=null}return m};t.is=function(f,a){var e=t(a,f.parentNode),p,b;p=-1;for(b=e.length;++p<b;)if(e[p]===f)return!0;return!1};
return t}(),fa=function(a,b,c){var d,g=a.childNodes;if(!1!==b.call(c,a))for(a=-1,d=g.length>>>0;++a!==d;fa(g[a],b,c));},X=function(){return!1},Y=function(){return!0},M=function(a){if(a instanceof M)return a;if(!(this instanceof M))return new M(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var d,g=a.button;void 0===this.pageX&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:
document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===g||(this.which=g&1?1:g&2?3:g&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Y:X;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};M.prototype={isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Y;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Y;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Y;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};var Z=Array.prototype.indexOf;Z||(Z=Array.prototype.indexOf=
function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),g=d.length>>>0;if(0===g)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=g)return-1;for(c=Math.max(0<=c?c:g-Math.abs(c),0);c<g;){if(c in d&&d[c]===a)return c;c++}return-1});var ma=function(){var a={select:function(a,c){for(var d,g,k=a.options,h=W(c),s=k.length,z=-1;s--;)g=k[s],(g.selected=h?-1!=Z.call(h,g.value):!1)?d=!0:da(g.getAttribute("mjs-default-option"))||(z=s);d||(a.selectedIndex=
z);return h}};a.radio=a.checkbox=function(a,c){if(5===F(c)){var d;d=H(a);d=c?-1!=Z.call(c,d):!1;return a.checked=d}};return function(b,c){if(1===b.nodeType){null===c?c="":1===F(c)&&(c+="");var d=a[b.type]||a[b.nodeName.toLowerCase()];d&&void 0!==d(b,c,"value")||(b.value=c)}}}(),ga=navigator.userAgent.toLowerCase(),ta=function(){var a=parseInt((/android (\d+)/.exec(ga)||[])[1],10)||!1;return function(){return a}}(),ua=function(){var a=parseInt((/msie (\d+)/.exec(ga)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(ga)||
[])[1],10)||!1);return function(){return a}}(),na=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==ua())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),aa=function(a,b,c,d){this.el=a;this.cb=b;this.scb=d;this.cbContext=c;this.inputType=b=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable="input"==a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():
"checkbox"==b?this.initCheckboxInput():this.initTextInput()};aa.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,d=this.el,g,k,h,s;g=0;for(k=b.length;g<k;g++)if("radio"==a)for(h=0,s=c.length;h<s;h++)ea(c[h],b[g][0],b[g][1]);else ea(d,b[g][0],b[g][1]);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var a=this.el,b=a.type,a=a.name,
c,d,g;this.onRadioInputChangeDelegate=l(this.onRadioInputChange,this);if(document.querySelectorAll)c=document.querySelectorAll("input[name="+a+"]");else{var k=document.getElementsByTagName("input"),h;c=[];d=0;for(g=k.length;d<g;d++)h=k[d],h.type==b&&h.name==a&&c.push(h)}this.radio=c;this.listeners.push(["click",this.onRadioInputChangeDelegate]);d=0;for(g=c.length;d<g;d++)D(c[d],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=l(this.onCheckboxInputChange,
this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);D(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,b=this,c=b.el,d=b.listeners,g;if(!ta()){var k=function(){a=!0},h=function(){a=!1;s()};d.push(["compositionstart",k]);d.push(["compositionend",h]);D(c,"compositionstart",k);D(c,"compositionend",h)}var s=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(na("input"))d.push(["input",s]),D(c,"input",s);else{var z=function(a){g||
(g=window.setTimeout(function(){s(a);g=null},0))},k=function(a){a=a||window.event;var c=a.keyCode;if(13==c&&b.submittable&&b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||z(a)};d.push(["keydown",k]);D(c,"keydown",k);na("paste")&&(d.push(["paste",z]),d.push(["cut",z]),D(c,"paste",z),D(c,"cut",z))}d.push(["change",s]);D(c,"change",s)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();
this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb.call(this.cbContext,a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;this.cb.call(this.cbContext,(a.target||a.srcElement).value)},setValue:function(a){var b=this.inputType,c,d;if("radio"==b)for(b=this.radio,c=0,d=b.length;c<d;c++){if(b[c].value==a){b[c].checked=!0;break}}else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):ma(this.el,a)},getValue:function(){var a=
this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;return null}return"checkbox"==a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(H(this.el))}};aa.getValue=H;aa.setValue=ma;var va=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),
A=function(a){return"function"==typeof a},P=function(){this.events={}};P.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new ha(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var g=this.events;g[a]||(g[a]=new ha(a));return g[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,
b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,V.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();
var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),
b={},c,d=-1,g=a.length;++d<g;c=a[d],b[c]=l(this[c],this));this.api=b}return this.api}};var ha=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=va();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};ha.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,g=b||a;if(g[d]&&!c.allowDupes)return null;var k=++this.lid,h=c.first||
!1;g[d]=k;a={fn:a,scope:b,uniScope:g,id:k,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};h?this.listeners.unshift(a):this.listeners.push(a);this.map[k]=a;return k},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,g=this.listeners,k;k=a==parseInt(a)?a:(b||a)[d];if(!k)return!1;for(var h=0,s=g.length;h<s;h++)if(g[h].id==k){c=h;delete g[h].uniScope[d];break}if(-1==c)return!1;g.splice(c,1);delete this.map[k];return!0},
hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=A(a)?b[this.uni]:a;if(!d)return!1;for(var g=0,k=c.length;g<k;g++)if(c[g].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=V.call(b),a.prepend&&(c=a.prepend.concat(c)),
a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,g,a="first"==b?[a[0]]:V.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){g=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(g);if("first"==b)return g;"last"==b&&(c=g);if(!1==b&&!1===g)break}if(b)return c}};var oa=function(a,b,c){setTimeout(function(){a.apply(b,
c||[])},0)},ia=function(){},wa=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),pa=function(a,b){var c,d;if(!a||!n(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(g){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},ba=function(a){var b=F(a);return null!==a&&"object"==typeof a&&(2<b||-1==b)},K=function(a){var b;return a&&(ba(a)||A(a))?A(b=a.then)?
b:!1:!1},ja=function(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)oa(function(){console.log(a);b&&console.log(b)});else throw a;},ka=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var s=a.shift();c(function(){s[0].apply(s[1],s[2]);a.length?d():b=!1},0)},g=function(c,z,g){g=g||[];a.push([c,z,g]);b||d()},k=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},h=function(a,b){if(a instanceof
h)return a;if(!(this instanceof h))return new h(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(0<arguments.length)if(c=K(a))a instanceof h?a.then(l(this.resolve,this),l(this.reject,this)):(new h(c,a)).then(l(this.resolve,this),l(this.reject,this));else if(A(a))try{a.call(b,l(this.resolve,this),l(this.reject,this))}catch(d){this.reject(d)}else this.resolve(a)};h.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,
_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=K(a)){a instanceof h?a.then(l(this._processResolveValue,this),l(this._processRejectReason,this)):(new h(c,
a)).then(l(this._processResolveValue,this),l(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)g(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=
!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)g(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new h,d=this._state;0==d||0!=
this._wait?(a&&A(a)?this._fulfills.push([k(a,c),null]):this._fulfills.push([c.resolve,c]),b&&A(b)?this._rejects.push([k(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&A(a)?g(k(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&A(b)?g(k(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,this._value)}catch(c){ja(c)}},done:function(a,b){var c=this._state;
1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){ja(c)}},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:l(this.then,this),done:l(this.done,this),fail:l(this.fail,this),always:l(this.always,
this)}},after:function(a){var b=this;if(K(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};A(a.done)?a.done(c):a.then(c)}return b}};h.fcall=function(a,b,c){return h.resolve(a.apply(b,c||[]))};h.resolve=function(a){var b=new h;b.resolve(a);return b};h.reject=function(a){var b=new h;b.reject(a);return b};h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=Array(c),g=c,k,l,f=function(a,f){d[f]=
a;g--;0==g&&b.resolve(d)};for(k=0;k<c;k++)(function(e){l=a[k];l instanceof h?l.done(function(a){f(a,e)}).fail(b.reject,b):K(l)||A(l)?(new h(l)).done(function(a){f(a,e)}).fail(b.reject,b):f(l,e)})(k);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=[],g=c,k,l,f=function(a){d.push(a);e()},e=function(){g--;0==g&&b.resolve(d)};for(k=0;k<c;k++)l=a[k],l instanceof h?l.done(f).fail(e):K(l)||A(l)?(new h(l)).done(f).fail(e):
f(l);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d,g;for(d=0;d<c&&(g=a[d],g instanceof h?g.done(b.resolve,b).fail(b.reject,b):K(g)||A(g)?(new h(g)).done(b.resolve,b).fail(b.reject,b):b.resolve(g),b.isPending());d++);return b};h.waterfall=function(a){if(!a.length)return h.resolve(null);for(var b=h.fcall(a.shift()),c;c=a.shift();)b=K(c)?b.then(function(a){return function(){return a}}(c)):b.then(c);return b};return h}(),xa=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,
c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g=/^(?:GET|HEAD)$/i,k=0,h=function(a,f,e){var b,p;if(n(a)&&e)f.push(encodeURIComponent(e)+"="+encodeURIComponent(a));else if(5===F(a)&&e)for(b=0,p=a.length;b<p;b++)h(a[b],f,e+"["+b+"]");else if(ba(a))for(b in a)a.hasOwnProperty(b)&&h(a[b],f,e?e+"["+b+"]":b)},s=function(f,e){f.replace(a,"");if(!1===e.cache){var p=(new Date).getTime();return b.test(f)?f.replace(b,"$1_="+p):f+(c.test(f)?"&":"?")+"_="+p}!e.data||window.FormData&&e.data instanceof
window.FormData||(n(e.data)?p=e.data:(p=[],h(e.data,p,null),p=p.join("&").replace(/%20/g,"+")),e.data=p,g.test(e.method)&&(f+=(c.test(f)?"&":"?")+e.data,e.data=null));return f},z={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},J={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",
xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},H={},G=new P,I=function(a){var f;f=eval;a&&(/^[^\S]*use strict/.test(a)?(f=document.createElement("script"),f.text=a,document.head.appendChild(f).parentNode.removeChild(f)):f(a))},x=function(a,f,e){var b,p;if(!ba(a)&&!A(a)&&e)b=document.createElement("input"),b.setAttribute("type","hidden"),b.setAttribute("name",
e),b.setAttribute("value",a),f.appendChild(b);else if(5===F(a)&&e)for(b=0,p=a.length;b<p;b++)x(a[b],f,e+"["+b+"]");else if(ba(a))for(b in a)a.hasOwnProperty(b)&&x(a[b],f,e?e+"["+b+"]":b)},f=function(a){for(var f,e,b="",p=0;p<a.elements.length;p++)if(f=a.elements[p],f.hasAttribute("name"))if(e="INPUT"===f.nodeName.toUpperCase()?f.getAttribute("type").toUpperCase():"TEXT","FILE"===e)for(e=0;e<f.files.length;b+="&"+encodeURIComponent(f.name)+"="+encodeURIComponent(f.files[e++].name));else if("RADIO"!==
e&&"CHECKBOX"!==e||f.checked)b+="&"+encodeURIComponent(f.name)+"="+encodeURIComponent(f.value);return b},e=function(a,f,e){var b=f?f.dataType:null;f=f?f.selector:null;if(!n(a))return a;e=e||"";if("xml"===b||!b&&0<=e.indexOf("xml"))return a=pa(N(a)),f?L(f,a):a;if("html"===b)return a=pa(a,"text/html"),f?L(f,a):a;if("fragment"==b){e=document.createDocumentFragment();b=document.createElement("div");for(b.innerHTML=a;b.firstChild;)e.appendChild(b.firstChild);return e}if("json"===b||!b&&0<=e.indexOf("json"))return wa(N(a));
("script"===b||!b&&0<=e.indexOf("javascript"))&&I(a);return a+""},p=function(a){var e=d.exec((window?window.location.href:"").toLowerCase())||[],b=d.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!b||b[1]===e[1]&&b[2]===e[2]&&(b[3]||("http:"===b[1]?"80":"443"))===(e[3]||("http:"===e[1]?"80":"443"))));e=new ka;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);
a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):f(a.form));a.url=s(a.url,a);b=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new t(a,e,this):new q(a,e,this):new B(a,e,this);this._deferred=e;this._transport=b;e.done(function(a){G.trigger("success",a)});e.fail(function(a){G.trigger("error",a)});e.always(function(){G.trigger("end")});G.trigger("start");a.timeout&&(this._timeout=setTimeout(l(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();
!1===G.trigger("beforeSend",a,b)&&(this._promise=ka.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,b)&&(this._promise=ka.reject());this._promise||(oa(b.send,b),e.abort=l(this.abort,this),e.always(this.destroy,this),this._promise=e)};p.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},
createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);x(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,f=a.jsonpParam||"callback",e=a.jsonpCallback||"jsonp_"+ ++k;a.url+=(c.test(a.url)?"&":"?")+f+"="+e;this._jsonpName=e;"undefined"!=typeof window&&(window[e]=l(this.jsonpCallback,this));"undefined"!=typeof global&&(global[e]=l(this.jsonpCallback,this));
return e},jsonpCallback:function(a){var f;try{f=this.processResponseData(a)}catch(e){this._deferred?this._deferred.reject(e):ja(e)}this._deferred&&this._deferred.resolve(f)},processResponseData:function(a,f){var b=this._opt;a=e(a,b,f);G.hasListener("processResponse")&&(a=G.trigger("processResponse",a,this._deferred));b.processResponse&&(a=b.processResponse.call(b.callbackScope,a,this._deferred));return a},processResponse:function(a,f){var e=this._deferred,b;if(this._opt.jsonp)if(a){try{I(a)}catch(p){e.reject(p)}e.isPending()&&
e.reject("jsonp script didn't invoke callback")}else e.reject("jsonp script is empty");else{try{b=this.processResponseData(a,f)}catch(c){e.reject(c)}e.resolve(b)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=
typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}};var m=function(a,f){f=f||{};a&&!n(a)?f=a:f.url=a;if(!f.url&&(f.form&&(f.url=f.form.getAttribute("action")),!f.url))throw"Must provide url";w(f,H,!1,!0);w(f,J,!1,!0);f.method=f.method?f.method.toUpperCase():f.form?f.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new p(f)).promise()};m.setup=function(a){w(H,a,!0,!0)};m.on=function(){G.on.apply(G,arguments)};m.un=function(){G.un.apply(G,
arguments)};m.get=function(a,f){f=f||{};f.method="GET";return m(a,f)};m.post=function(a,f){f=f||{};f.method="POST";return m(a,f)};m.load=function(a,f,e){e=e||{};n(f)||(e=f);e.dataType="fragment";return m(f,e).done(function(f){if(e.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(f)})};m.loadScript=function(a){return m(a,{transport:"script"})};m.submit=function(a,f){f=f||{};f.form=a;return m(null,f)};var q=function(a,f,e){var b;if(!(window.XMLHttpRequest&&(b=new XMLHttpRequest)||
(b=new ActiveXObject("Msxml2.XMLHTTP"))||(b=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=b;this._deferred=f;this._opt=a;this._ajax=e;a.progress&&D(b,"progress",l(a.progress,a.callbackScope));a.uploadProgress&&b.upload&&D(b.upload,"progress",l(a.uploadProgress,a.callbackScope));b.onreadystatechange=l(this.onReadyStateChange,this)};q.prototype={_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,f=this._xhr,e;if(a.xhrFields)for(e in a.xhrFields)f[e]=
a.xhrFields[e];a.data&&a.contentType&&f.setRequestHeader("Content-Type",a.contentType);f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.setRequestHeader("Accept",a.dataType&&z[a.dataType]?z[a.dataType]+", */*; q=0.01":z._default);for(e in a.headers)f.setRequestHeader(e,a.headers[e])},onReadyStateChange:function(){var a=this._xhr,f=this._deferred;if(0===a.readyState)a.onreadystatechange=ia,f.resolve(a);else if(4===a.readyState){a.onreadystatechange=ia;var e;a:{try{e=!a.status&&location&&"file:"==
location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(b){}e=!1}e?this._ajax.processResponse(n(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):f.reject(a)}},abort:function(){this._xhr.onreadystatechange=ia;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(f){this._deferred.reject(f)}},destroy:function(){delete this._xhr;delete this._deferred;
delete this._opt;delete this._ajax}};var B=function(a,f,e){this._opt=a;this._ajax=e;this._deferred=f};B.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);D(a,"load",l(this.onLoad,this));D(a,"error",l(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},
abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var t=function(a,f,e){this._opt=a;this._ajax=e;this._deferred=f};t.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),f="frame-"+ ++k,e=this._opt.form;a.setAttribute("id",f);a.setAttribute("name",f);a.style.display=
"none";document.body.appendChild(a);e.setAttribute("action",this._opt.url);e.setAttribute("target",f);D(a,"load",l(this.onLoad,this));D(a,"error",l(this.onError,this));this._el=a;try{e.submit()}catch(b){this._deferred.reject(b)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},
destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return m}(),qa=function(){var a=0,b={},c=function(a,e){var b=0;switch(e.nodeName.toLowerCase()){case "select":return fa(e,function(a){a.selected&&b++}),b;case "input":if(/radio|checkbox/i.test(e.type))return fa(e.form,function(a){a.type==e.type&&a.name==e.name&&a.checked&&b++}),b}return a.length},d=function(a,e){if(!e)return void 0==a||""===a;
switch(e.nodeName.toLowerCase()){case "select":var b=H(e);return!b||0==b.length;case "input":if(/radio|checkbox/i.test(e.type))return 0==c(a,e)}return 0==N(a).length},g=function(a,e){if(A(e))return a;5!==F(e)&&(e=[e]);var b,c=e.length;for(b=-1;++b<c;a=a.replace(new RegExp("\\{"+b+"\\}","g"),e[b]));return a},k={};w(k,{required:function(a,e,b){return!1===b?!0:!d(a,e)},regexp:function(a,e,b){b=b instanceof RegExp?b:new RegExp(b);return d(a,e)||b.test(a)},notregexp:function(a,e,b){b=b instanceof RegExp?
b:new RegExp(b);return d(a,e)||!b.test(a)},minlength:function(a,e,b){return d(a,e)||(e?c(N(a),e)>=b:a.toString().length>=b)},maxlength:function(a,e,b){return d(a,e)||(e?c(N(a),e)<=b:a.toString().length<=b)},rangelength:function(a,e,b){var m=e?c(N(a),e):a.toString().length;return d(a,e)||m>=b[0]&&m<=b[1]},min:function(a,b,c){return d(a,b)||parseInt(a,10)>=c},max:function(a,b,c){return d(a,b)||parseInt(a,10)<=c},range:function(a,b,c){a=parseInt(a,10);return d(a,b)||a>=c[0]&&a<=c[1]},email:function(a,
b){return d(a,b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},
url:function(a,b){return d(a,b)||/^((https?|ftp):\/\/|)(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return d(a,b)||!/Invalid|NaN/.test(new Date(a))},dateiso:function(a,b){return d(a,b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return d(a,b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return d(a,b)||/^\d+$/.test(a)},creditcard:function(a,b){if(d(a,b))return!0;if(/[^0-9-]+/.test(a))return!1;var c=0,m=!1,q;a=a.replace(/\D/g,"");for(var g=a.length-1;0<=g;g--)q=a.charAt(g),q=parseInt(q,10),m&&9<(q*=2)&&(q-=9),c+=q,m=!m;return 0==
c%10},accept:function(a,b,c){c=n(c)?c.replace(/,/g,"|"):"png|jpe?g|gif";return d(a,b)||a.match(new RegExp(".("+c+")$","i"))},equalto:function(a,b,c,m){c=(b=m.getValidator().getField(c))?b.getElem():c;return a==H(c)},notequalto:function(a,b,c,m){c=(b=m.getValidator().getField(c))?b.getElem():c;return a!=H(c)},zxcvbn:function(a,b,c){return zxcvbn(a).score>=parseInt(c)}});var h={required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",
date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",rangelength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",
max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}."},s={allowSubmit:!0,alwaysCheck:!1,alwaysDisplayState:!1,data:null,ignore:null,disabled:!1,cls:{valid:"",error:"",ajax:""},errorBox:{cls:"",fn:null,tag:"",position:"after",elem:null,enabled:!0},callback:{scope:null,destroy:null,statechange:null,errorchange:null,submit:null,check:null,beforeAjax:null,afterAjax:null,displaystate:null},rules:{},messages:{}},z=function(a){if(!a)return{};var b=
function(b,e,c){var d=a[b],g=!1;if(void 0!==d){switch(c){case "string":g=n(d);break;case "function":g=A(d);break;case "boolean":g=2===F(d)}g&&(a[b]={},a[b][e]=d)}};b("errorBox","enabled","boolean");b("errorBox","tag","string");b("errorBox","fn","function");return a},K=function(a,b,c){b=b||{};var d,g;this._observable=new P;w(this,this._observable.getApi());this.cfg=d=w({},s,z(x.fieldDefaults),z(b),!0,!0);this.input=new aa(a,this.onInputChange,this,this.onInputSubmit);this.elem=a;this.vldr=c;this.callbackScope=
g=d.callback.scope;this.enabled=!a.disabled;this.id=a.getAttribute("name")||a.getAttribute.attr("id");this.data=b.data;this.rules={};d.messages=w({},h,x.messages,d.messages,!0,!0);a.setAttribute("data-validator",c.getVldId());this.input.radio&&this.initRadio();for(var k in d.callback)if(d.callback[k])this.on(k,d.callback[k],g);d.rules&&this.setRules(d.rules,!1);this.readRules();this.prev=this.input.getValue();d.disabled&&this.disable()};K.prototype={vldr:null,elem:null,rules:null,cfg:null,callbackScope:null,
input:null,enabled:!0,valid:null,dirty:!1,id:null,prev:"",error:null,errorRule:null,pending:null,rulesNum:0,displayState:!1,data:null,checking:!1,checkTmt:null,errorBox:null,customError:!1,getValidator:function(){return this.vldr},initRadio:function(){var a=this.input.radio,b=this.vldr.getVldId(),c,d;c=0;for(d=a.length;c<d;c++)a[c].setAttribute("data-validator",b)},setRules:function(a,b){b=void 0==b?!0:b;for(var c in a)this.setRule(c,a[c],!1);b?this.check(!1):this.setValidState(null);return this},
setRule:function(a,b,c){var d=this.rules;c=void 0==c?!0:c;null===b?(d[a]&&this.rulesNum--,delete d[a]):(d[a]||this.rulesNum++,d[a]=b,null!==this.valid&&this.setValidState(!1));c?this.check(!1):this.setValidState(null);return this},setMessage:function(a,b){this.cfg.messages[a]=b;return this},setMessages:function(a){for(var b in a)this.setMessage(b,a[b]);return this},getMessages:function(){return w({},this.cfg.messages)},readRules:function(){var a=this.elem,b=a.className,c={},d,g;for(g in k)k.hasOwnProperty(g)&&
(d=a.getAttribute(g)||a.getAttribute("data-validate-"+g),void 0!=d&&!1!==d&&("minlength"!=g&&"maxlength"!=g||-1!=parseInt(d,10))&&(c[g]=d,(d=a.getAttribute("data-message-"+g))&&this.setMessage(g,d)));if(d=a.getAttribute("remote"))c.remote=d;if(b)for(b=b.split(" "),g=0,d=b.length;g<d;g++)if(a=N(b[g]),k[a]||"remote"==a)c[a]=!0;for(g in c)this.setRule(g,c[g],!1)},getRules:function(){return this.rules},hasRule:function(a){return this.rules[a]?!0:!1},getValue:function(){return this.input.getValue()},getUserData:function(){return this.data},
setUserData:function(a){var b=this.data;this.data=a;return b},isEmpty:function(){return d(this.getValue(),this.elem)},enable:function(){this.enabled=!0;this.vldr.reset();return this},disable:function(){this.enabled=!1;!1===this.valid&&(this.setValidState(!0),this.doDisplayState());return this},enableDisplayState:function(){this.displayState=!0},disableDisplayState:function(){this.displayState=!1},isDisplayStateEnabled:function(){return this.displayState},toggleErrorBox:function(a){var b=this.cfg,
c=b.errorBox.enabled;b.errorBox.enabled=a;!c&&a&&a.displayState&&!1===this.valid()&&this.doDisplayState()},isEnabled:function(){return this.enabled},getElem:function(){return this.elem},getName:function(){return this.id},getError:function(){return this.error},getErrorRule:function(){return this.errorRule},isValid:function(){return this.isEnabled()?this.customError?!1:!0===this.valid&&!this.pending||0===this.rulesNum:!0},getExactValidState:function(){return this.valid},setCustomError:function(a,b){this.customError=
a?!0:!1;this.setValidState(a?!1:!0);this.setError(!0===a?null:a,b);this.doDisplayState()},reset:function(){this.abort();this.dirty=!1;this.prev="";this.setValidState(null);this.setError(null);this.doDisplayState();return this},abort:function(){this.pending&&(this.pending.abort(),this.pending=null);return this},check:function(a){var b=this.rules,c=this.cfg,d=this.elem;if(!this.isEnabled())return!0;if(this.customError)return!1;if(0==this.rulesNum&&!1!==this.valid)return!0;if(this.checking)return this.checkTmt||
(this.checkTmt=setTimeout(l(this.checkTimeout,this),100)),!0===this.valid;this.checking=!0;if(!(!0===a||b.equalTo||b.notEqualTo||this.dirty||null===this.valid||c.alwaysCheck))return this.pending||this.doDisplayState(),this.checking=!1,!0===this.valid;var q=!0,h=!1,t=this.getValue(),s,n;for(n in b)if("remote"==n){if(this.dirty||c.alwaysCheck||null===this.valid||!0===a)if(t||b[n].checkEmpty)h=!0}else if(!0!==(s=(A(b[n])?b[n]:k[n]).call(this.callbackScope,t,d,b[n],this))){q=!1;this.setError(g(s||c.messages[n]||
"",b[n]),n);break}h=h&&q;q&&this.setError(null);h?this.ajaxCheck():(this.setValidState(q),this.doDisplayState());this.checking=this.dirty=!1;this.trigger("check",this,this.valid);return!0===this.valid&&!h},doDisplayState:function(){var a=this.cfg,b=this.isValid(),c=a.cls.error,d=a.cls.valid,g=this.elem;this.displayState||a.alwaysDisplayState||(b=null);null===this.valid&&(b=null);c&&(!1===b?I(g,c):J(g,c));d&&(!0===b?I(g,d):J(g,d));c=this.getErrorBox();d=this.error;c&&(!1===b&&d&&(c.innerHTML=state.error),
c.style.display=!1===b&&d&&a.errorBox.enabled?"block":"none");this.trigger("displaystate",this,b,this.error)},getErrorBox:function(){var a=this.cfg.errorBox;return a.tag||a.fn||a.selector?(!this.errorBox&&a.enabled&&this.createErrorBox(),this.errorBox):null},destroy:function(){this.trigger("destroy",this);this.elem.removeAttribute("data-validator");this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox);this.input.destroy();delete this.input;this._observable.destroy();delete this._observable;
delete this.vldr;delete this.cfg;delete this.errorBox;delete this.rules;delete this.elem},isPending:function(){return null!==this.pending},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("statechange",this,a))},setError:function(a,b){if(this.error!=a||this.errorRule!=b)this.error=a,this.errorRule=b,this.trigger("errorchange",this,a,b)},checkTimeout:function(){this.checkTmt=null;this.checking||this.check(!1)},onInputChange:function(a){this.prev!==a&&(this.dirty=!0,this.customError=
!1,this.abort(),this.pending||this.check(!1),this.prev=this.input.getValue())},onInputSubmit:function(a){a=new M(a);if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||!1!==this.trigger("submit",this,a)))return a.preventDefault(),!1},createErrorBox:function(){var a=this.cfg.errorBox,b=a.tag,c=a.cls,d=a.fn,g=a.position,a=a.elem;d?this.errorBox=d.call(this.callbackScope,this):a?this.errorBox=a:(this.errorBox=document.createElement(b),this.errorBox.className=c,b=(b=this.input.radio)?b[b-1]:this.elem,
"appendParent"==g?b.parentNode.appendChild(this.errorBox):"before"==g?b.parentNode.insertBefore(this.errorBox,b):b.parentNode.insertBefore(this.errorBox,b.nextSibling))},ajaxCheck:function(){var a=this.elem,b=this.rules.remote,c=this.getValue(),d=this.cfg,b=w({},n(b)?{url:b}:b,!0);b.data=b.data||{};b.data[b.paramName||a.getAttribute("name")||a.getAttribute("id")]=c;b.handler||(b.dataType="text");b.cache=!1;d.cls.ajax&&I(a,d.cls.ajax);this.trigger("beforeAjax",this,b);this.pending=xa(b);this.pending.done(l(this.onAjaxSuccess,
this));this.pending.fail(l(this.onAjaxError,this))},onAjaxSuccess:function(a){var b=this.rules,c=this.cfg;this.pending=null;var d=!0;b.remote.handler?(a=b.remote.handler.call(this.callbackScope,this,a),!0!==a&&(this.setError(g(a||c.messages.remote||"",b.remote),"remote"),d=!1)):a?(this.setError(a,"remote"),d=!1):this.setError(null);c.cls.ajax&&J(this.elem,c.cls.ajax);this.setValidState(d);this.doDisplayState();this.trigger("afterAjax",this)},onAjaxError:function(a,b){var c=this.cfg;c.cls.ajax&&J(this.elem,
c.cls.ajax);this.pending=null;"abort"!=b&&"abort"!=a&&(this.setValidState(!1),this.doDisplayState(),this.trigger("afterAjax",this))}};var V={alwaysCheck:!1,alwaysDisplayState:!1,disabled:!1,value:null,elem:null,errorBox:null,errorField:null,data:null,cls:{valid:"",error:""},fields:[],rules:{},messages:{},callback:{scope:null,destroy:null,statechange:null,errorchange:null,displaystate:null}},G=function(a,b){a=a||{};var c,d;this._observable=new P;this._vldr=b;w(this,this._observable.getApi());this.cfg=
c=w({},V,x.groupDefaults,a,!0,!0);this.callbackScope=d=c.callback.scope;this.data=a.data;this.el=a.elem;this.fields={};this.rules={};c.messages=w({},h,x.messages,c.messages,!0,!0);var g;if(c.callback)for(g in c.callback)if(c.callback[g])this.on(g,c.callback[g],d);c.rules&&this.setRules(c.rules,!1);if(c.fields)for(g=0,d=a.fields.length;g<d;g++)this.add(b.getField(c.fields[g]));this.enabled=!c.disabled};G.prototype={fields:null,rules:null,cfg:null,callbackScope:null,vldr:null,enabled:!1,invalid:null,
valid:null,displayState:!1,rulesNum:0,error:null,data:null,errorBox:null,el:null,enable:function(){this.enabled=!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},isValid:function(){return!this.enabled||0===this.invalid&&!0===this.valid},getExactValidState:function(){return this.valid},reset:function(){this.invalid=0;this.setValidState(null);this.setError(null);this.doDisplayState();return this},getUserData:function(){return this.data},getName:function(){return this.cfg.name},
setRules:function(a,b){b=void 0==b?!0:b;for(var c in a)this.setRule(c,a[c],!1);b?this.check():this.setValidState(null);return this},setRule:function(a,b,c){var d=this.rules;c=void 0==c?!0:c;null===b?(d[a]&&this.rulesNum--,delete d[a]):(d[a]||this.rulesNum++,d[a]=b,null!==this.valid&&this.setValidState(!1));c?this.check():this.setValidState(null);return this},getRules:function(){return w({},this.rules)},hasRule:function(a){return this.rules[a]?!0:!1},setError:function(a){var b=this.cfg;this.error!=
a&&(b.errorField?(this.vldr.getField(b.errorField).setError(a),this.error=null):(this.error=a,this.trigger("errorchange",this,a)))},getError:function(){return this.error},getFields:function(){return this.fields},enableDisplayState:function(){this.displayState=!0;return this},disableDisplayState:function(){this.displayState=!1;return this},check:function(){var a=this.cfg,b=this.fields,c=this.rules;if(!this.enabled||0==this.rulesNum)return this.setValidState(null),this.doDisplayState(),!0;this.countInvalid();
if(0<this.invalid)return this.setValidState(null),this.doDisplayState(),!0;var d={},h=!0,l=null,t;if(a.value){for(t in b)d[t]=b[t].getValue();l=a.value.call(this.callbackScope,d,this)}for(t in c)if(!0!==(b=(A(c[t])?c[t]:k[t]).call(this.callbackScope,l,null,c[t],this,d))){h=!1;b||a.messages[t]?this.setError(g(b||a.messages[t]||"",c[t])):this.setError(null);break}h&&this.setError(null);this.setValidState(h);this.doDisplayState();return!0===this.valid},doDisplayState:function(){var a=this.valid,b=this.cfg;
this.displayState||b.alwaysDisplayState||(a=null);if(b.errorBox){var c=this.getErrorBox();null!==a?c&&(c.innerHTML=this.error||"",c.style.display=!1===this.valid?"block":"none"):c&&(c.style.display="none")}c=b.cls.error;b=b.cls.valid;a=this.valid;c&&(!1===a?I(this.el,c):J(this.el,c));b&&(!0===a?I(this.el,b):J(this.el,b));this.trigger("displaystate",this,this.valid)},getErrorBox:function(){var a=this.cfg,b=this.fields,c=a.errorBox;if(b[c])return b[c].getErrorBox();this.errorBox||(A(a.errorBox)?this.errorBox=
a.errorBox.call(this.callbackScope,this):this.errorBox=a.errorBox);return this.errorBox},destroy:function(){var a=this.fields,b;for(b in a)a[b]&&(this.setFieldEvents(a[b],"un"),delete a[b]);this.errorBox&&this.errorBox.parentNode.removeChild(this.errorBox);this._observable.destroy();delete this._observable;delete this.vldr;delete this.rules;delete this.fields;delete this.cfg},add:function(a){var b=this.fields,c=a.getName();b[c]||(b[c]=a,this.setFieldEvents(a,"on"))},setFieldEvents:function(a,b){a[b]("statechange",
this.onFieldStateChange,this)},remove:function(a){var b=this.fields,c=a.getName();b[c]&&(delete b[c],this.setFieldEvents(a,"un"));return this},setValidState:function(a){this.valid!==a&&(this.valid=a,this.trigger("statechange",this,a))},countInvalid:function(){var a=this.fields;this.invalid=0;for(var b in a)this.invalid+=a[b].isValid()?0:1},onFieldStateChange:function(a,b){this.trigger("fieldstatechange",this,a,b);this.check()}};var W={form:null,all:{},fields:{},rules:{},cls:{valid:"",error:"",checking:""},
groups:{},callback:{scope:null,destroy:null,reset:null,beforesubmit:null,submit:null,statechange:null,check:null,displaystate:null,displaystatechange:null}},x=function(c,e,d){var g=c.nodeName.toLowerCase();this.vldId=++a;b[this.vldId]=this;c.setAttribute("data-validator",this.vldId);this.el=c;e&&!n(e)&&(d=e,e=null);this._observable=new P;this.cfg=c=w({},W,x.defaults,x[e],d,!0,!0);this.callbackScope=e=c.callback.scope;this.isForm="form"==g;this.isField=/input|select|textarea/.test(g);this.fields={};
this.groups={};w(this,this._observable.getApi());this._observable.createEvent("submit",!1);this._observable.createEvent("beforesubmit",!1);this.onRealSubmitClickDelegate=l(this.onRealSubmitClick,this);this.resetDelegate=l(this.reset,this);this.onSubmitClickDelegate=l(this.onSubmitClick,this);this.onFormSubmitDelegate=l(this.onFormSubmit,this);delete c.callback.scope;var h,k;for(k in c.callback)this.on(k,c.callback[k],e);this.initFields();g=this.fields;for(h in c.rules)g[h]&&g[h].setRules(c.rules[h],
!1);c.rules=null;for(h in c.groups)this.addGroup(h,c.groups[h]);this.initForm("bind");delete c.rules;delete c.fields;delete c.groups;this.enabled=!0};x.prototype={vldId:null,el:null,cfg:null,enabled:!1,invalid:null,pending:0,grps:0,outside:!0,submitted:!1,displayState:!1,isForm:!1,isField:!1,submitButton:null,hidden:null,callbackScope:null,preventFormSubmit:!1,_observable:null,fields:null,groups:null,getVldId:function(){return this.vldId},getElem:function(){return this.el},getGroup:function(a){return this.groups[a]||
null},getField:function(a){return this.fields[a]||null},enable:function(){this.enabled=!0;return this},disable:function(){this.enabled=!1;return this},isEnabled:function(){return this.enabled},enableDisplayState:function(){var a=this.fields,b=this.groups,c;if(!0!==this.displayState){this.displayState=!0;for(c in a)a[c].enableDisplayState();for(c in b)b[c].enableDisplayState();this.trigger("displaystatechange",this,!0)}return this},disableDisplayState:function(){var a=this.groups,b=this.fields,c;if(!1!==
this.displayState){this.displayState=!1;for(c in b)b[c].disableDisplayState();for(c in a)a[c].disableDisplayState();this.trigger("displaystatechange",this,!1)}return this},isDisplayStateEnabled:function(){return this.displayState},isValid:function(){return!1===this.enabled?!0:0===this.invalid&&0===this.pending&&0===this.grps&&!0===this.outside},getErrors:function(a){var b=!0==a?[]:{},c,d,g,h=[this.fields,this.groups],k;if(!this.isEnabled())return b;for(g=0;2>g;g++)for(d in k=h[g],k)null===k[d].getExactValidState()&&
k[d].check(),k[d].isValid()||(c=k[d].getError())&&(a?b.push(c):b[d]=c);return b},check:function(){var a=this.fields,b=this.groups;if(!this.isEnabled())return!0;var c=this.isValid(),d;for(d in a)a[d].check();for(d in b)b[d].check();this.outside=!1!==this.trigger("check",this);a=this.isValid();c!=a&&(this.doDisplayState(),this.trigger("statechange",this,!1));return a},add:function(a,b){var c=a.nodeName.toLowerCase(),d=a.type;if("input"!=c&&"textarea"!=c&&"select"!=c||"submit"==d||"reset"==d||"button"==
d||null!==a.getAttribute("data-no-validate")||null!==a.getAttribute("data-validator"))return this;var d=a.getAttribute("name")||a.getAttribute("id"),g=this.cfg,c=this.fields;if(!d)return this;d=g.fields&&g.fields[d]?g.fields[d]:b||{};n(d)&&(d={rules:[d]});d=w({},g.all||{},d,!0,!0);if(d.ignore)return this;d.callback||(d.callback={scope:this.callbackScope});g=new K(a,d,this);d=g.getName();if(c[d])return this;c[d]=g;this.setFieldEvents(g,"on");this.displayState&&g.enableDisplayState();this.isEnabled()&&
null!==this.invalid&&g.check();return this},addGroup:function(a,b){var c=this.groups;c[a]||(b.name=a,c[a]=new G(b,this),this.setGroupEvents(c[a],"on"),this.isEnabled()&&null!==this.invalid&&c[a].check())},focusInvalid:function(){var a=this.fields,b;for(b in a)if(!a[b].isValid()){a[b].getElem().focus();break}},reset:function(){var a=this.fields,b=this.groups,c;this.submitted=!1;this.disableDisplayState();for(c in b)b[c].reset();for(c in a)a[c].reset();this.pending=0;this.invalid=null;this.grps=0;this.outside=
!1;this.doDisplayState();this.trigger("reset",this);return this},submit:function(){var a=this.el;if(this.isForm)if(A(a.submit))!1!==this.trigger("beforesubmit",this)&&!1!==this.trigger("submit",this)&&a.submit();else this.onSubmit();else this.onSubmit()},setFieldEvents:function(a,b){a[b]("statechange",this.onFieldStateChange,this);a[b]("beforeAjax",this.onBeforeAjax,this);a[b]("afterAjax",this.onAfterAjax,this);a[b]("submit",this.onFieldSubmit,this);a[b]("destroy",this.onFieldDestroy,this)},setGroupEvents:function(a,
b){a[b]("statechange",this.onGroupStateChange,this)},initFields:function(){var a=this.el,b,c;if(this.isField)return this.add(a),this;a=L("input, textarea, select",a);b=-1;for(c=a.length;++b<c;this.add(a[b]));return this},initForm:function(a){var b=this.el,c=b.getElementsByTagName("input"),d=L(".submit",b),g=L(".reset",b);a="bind"==a?D:ea;var h,k,l,n;h=0;for(k=c.length;h<k;h++)n=c[h],l=n.type,"submit"==l?a(n,"click",this.onRealSubmitClickDelegate):"reset"==l&&a(n,"click",this.resetDelegate);h=-1;for(k=
d.length;++h<k;"submit"!=d[h].type&&a(d[h],"click",this.onSubmitClickDelegate));h=-1;for(k=g.length;++h<k;"reset"!=g[h].type&&a(g[h],"click",this.resetDelegate));this.isForm&&a(b,"submit",this.onFormSubmitDelegate)},onRealSubmitClick:function(a){a=new M(a||window.event);this.submitButton=a.target||a.srcElement;this.preventFormSubmit=!1;return this.onSubmit(a)},onSubmitClick:function(a){this.preventFormSubmit=!1;return this.onSubmit(new M(a||window.event))},onFormSubmit:function(a){a=new M(a);if(!this.isValid()||
this.preventFormSubmit)return a.preventDefault(),!1},onFieldSubmit:function(a,b){this.preventFormSubmit=!1;this.enableDisplayState();this.submitted=!0;return this.onSubmit(b)},onSubmit:function(a){this.enableDisplayState();if(this.pending)return a&&a.preventDefault(),!1;var b=this.submitButton?!0:!1;this.isForm&&(this.hidden&&(this.el.removeChild(this.hidden),this.hidden=null),this.submitButton&&/input|button/.test(this.submitButton.nodeName)&&(this.hidden=document.createElement("input"),this.hidden.type=
"hidden",this.hidden.setAttribute("name",this.submitButton.name),this.hidden.value=this.submitButton.value,this.el.appendChild(this.hidden)));this.submitButton=null;if(!this.isValid()&&(this.check(),this.onFieldStateChange(),this.pending))return a&&a.preventDefault(),!1;if(!1===this.trigger("beforesubmit",this)||!this.isValid())return a&&(a.preventDefault(),a.stopPropagation()),this.pending||(this.focusInvalid(),this.submitted=!1),this.trigger("failedsubmit",this,b),!1;this.pending||(this.submitted=
!1);a=this.trigger("submit",this);this.preventFormSubmit=!a;return a},onFieldDestroy:function(a){a=a.getElem();a=a.getAttribute("name")||a.getAttribute("id");delete this.fields[a]},onFieldStateChange:function(a,b){var c=this.invalid,d=this.fields;this.invalid=0;for(var g in d)this.invalid+=d[g].isValid()?0:1;a&&this.trigger("fieldstatechange",this,a,b);if(null===c||null!==c&&this.invalid!==c)this.doDisplayState(),this.trigger("statechange",this,this.isValid())},onGroupStateChange:function(){var a=
this.groups,b=this.grps;this.grps=0;for(var c in a)this.grps+=a[c].isValid()?0:1;if(null===b||null!==b&&this.grps!==b)this.doDisplayState(),this.trigger("statechange",this,this.isValid())},doDisplayState:function(){var a=this.cfg,b=this.isValid(),c=a.cls.error,a=a.cls.valid,d=this.el;if(this.isField||!this.displayState)b=null;null===this.invalid&&(b=null);c&&(!1===b?I(d,c):J(d,c));a&&(!0===b?I(d,a):J(d,a));this.trigger("displaystate",this,b)},onBeforeAjax:function(){this.pending++;this.cfg.cls.ajax&&
I(this.el,this.cfg.cls.ajax)},onAfterAjax:function(){var a=this.fields,b=this.cfg;this.pending=0;for(var c in a)this.pending+=a[c].isPending()?1:0;this.doDisplayState();b.cls.ajax&&J(this.el,b.cls.ajax);this.submitted&&0==this.pending&&(this.submitted=!1,this.isValid()?this.submit():this.focusInvalid())},destroy:function(){var a=this.groups,c=this.fields,d;this.reset();this.trigger("destroy",this);delete b[this.vldId];for(d in a)a.hasOwnProperty(d)&&a[d]&&(this.setGroupEvents(a[d],"un"),a[d].destroy(),
delete a[d]);for(d in c)c.hasOwnProperty(d)&&c[d]&&(this.setFieldEvents(c[d],"un"),c[d].destroy(),delete c[d]);this._observable.destroy();delete this._observable;this.initForm("unbind");delete this.fields;delete this.groups;delete this.el;delete this.cfg}};x.defaults={};x.messages={};x.fieldDefaults={};x.groupDefaults={};x.addMethod=function(a,b,c){k[a]||(k[a]=b,c&&(x.messages[a]=c))};x.getValidator=function(a){a=a.getAttribute("data-validator");return b[a]||null};return x}();window.jQuery&&(jQuery.fn.metaphorjsValidator=
function(a,b,c){var d="metaphorjsValidator",g;"string"==typeof a&&"destroy"!=a&&(g=a,a=b,b=c);b=b||"default";a=a||{};d+="-"+b;this.each(function(){var c=$(this),h=c.data(d);if("destroy"==a)h&&(h.destroy(),c.data(d,null));else{if(h)throw Error("MetaphorJs validator is already instantiated for this html element");a.form=c;a.instanceName=b;c.data(d,new qa(g,a))}})});ca.lib.Validator=qa;"undefined"!=typeof global?global.MetaphorJs=ca:window.MetaphorJs=ca})();
